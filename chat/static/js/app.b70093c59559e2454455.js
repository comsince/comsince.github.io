webpackJsonp([1],[,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return c}),n.d(t,"i",function(){return l}),n.d(t,"k",function(){return u}),n.d(t,"A",function(){return d}),n.d(t,"u",function(){return f}),n.d(t,"x",function(){return h}),n.d(t,"o",function(){return g}),n.d(t,"l",function(){return v}),n.d(t,"q",function(){return p}),n.d(t,"r",function(){return m}),n.d(t,"s",function(){return y}),n.d(t,"v",function(){return C}),n.d(t,"z",function(){return _}),n.d(t,"t",function(){return w}),n.d(t,"m",function(){return k}),n.d(t,"n",function(){return I}),n.d(t,"y",function(){return S}),n.d(t,"p",function(){return T}),n.d(t,"w",function(){return b}),n.d(t,"B",function(){return x}),n.d(t,"j",function(){return A}),n.d(t,"g",function(){return M}),n.d(t,"h",function(){return E});var i="ws",s="120.79.90.245",a=9326,o=25e3,r=3e4,c="blob",l="CONNECT",u="DISCONNECT",d="CONNECT_ACK",f="PUBLISH",h="PUB_ACK",g="FRP",v="FP",p="UPUI",m="GPGI",y="MP",C="MS",_="MN",w="GQNUT",k="US",I="FAR",S="FRN",T="FHR",b="FN",x="http://"+s+":8081/login",A="vue-device-id",M="vue-user-id",E="vue-token"},,,,,,,,,function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(262),g=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||s()(t)).call(this));return n.vueWebsocket=e,n}return f()(t,e),c()(t,[{key:"vueWebsocketClient",get:function(){return this.vueWebsocket}}]),t}(h.a);t.a=g},function(e,t,n){"use strict";var i=n(21),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(6),u=function(){function e(){o()(this,e)}return c()(e,null,[{key:"saveConverSations",value:function(e){localStorage.setItem("coversations",s()(e))}},{key:"getConversations",value:function(){var e=localStorage.getItem("coversations");return JSON.parse(e)}},{key:"getLastMessageSeq",value:function(){return localStorage.getItem("last_message_seq")}},{key:"setUploadToken",value:function(e,t){localStorage.setItem(e,t)}},{key:"getImageUploadToken",value:function(){return localStorage.getItem("http://image.comsince.cn/")}},{key:"setLastMessageSeq",value:function(e){localStorage.setItem("last_message_seq",e)}},{key:"saveMessages",value:function(e){localStorage.setItem("messages",s()(e))}},{key:"getMessages",value:function(){var e=localStorage.getItem("messages");return JSON.parse(e)}},{key:"updateSendMessageCount",value:function(){var e=localStorage.getItem("send_message_count");e=e?parseInt(e)+1:1,localStorage.setItem("send_message_count",e)}},{key:"getSendMessageCount",value:function(){var e=localStorage.getItem("send_message_count");return e||(e=0),e}},{key:"resetSendMessageCount",value:function(){localStorage.setItem("send_message_count",0)}},{key:"getUserId",value:function(){return localStorage.getItem(l.g)}},{key:"setSelectTarget",value:function(e){localStorage.setItem("select_target",e)}},{key:"getSelectTarget",value:function(){return localStorage.getItem("select_target")}},{key:"setFriendRequestVersion",value:function(e){localStorage.setItem("friend_request_version",e)}},{key:"getFriendRequestVersion",value:function(){return localStorage.getItem("friend_request_version")}},{key:"clearLocalStore",value:function(){localStorage.setItem("coversations",""),localStorage.setItem("last_message_seq",""),localStorage.setItem("messages",""),localStorage.setItem("send_message_count",0),localStorage.setItem("select_target",""),localStorage.setItem("friend_request_version",0),localStorage.setItem(l.g,"")}}]),e}();t.a=u},,,,function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e)};a.Unknown=0,a.Text=1,a.Voice=2,a.Image=3,a.Location=4,a.File=5,a.Video=6,a.Sticker=7,a.ImageText=8,a.P_Text=9,a.RecallMessage_Notification=80,a.Tip_Notification=90,a.Typing=91,a.CreateGroup_Notification=104,a.AddGroupMember_Notification=105,a.KickOffGroupMember_Notification=106,a.QuitGroup_Notification=107,a.DismissGroup_Notification=108,a.TransferGroupOwner_Notification=109,a.ChangeGroupName_Notification=110,a.ModifyGroupAlias_Notification=111,a.ChangeGroupPortrait_Notification=112,a.MuteGroupMember_Notification=113,a.ChangeJoinType_Notification=114,a.ChangePrivateChat_Notification=115,a.ChangeSearchable_Notificaiton=116,a.SetGroupManager_Notification=117,a.VOIP_CONTENT_TYPE_START=400,a.VOIP_CONTENT_TYPE_END=402,a.VOIP_CONTENT_TYPE_ACCEPT=401,a.VOIP_CONTENT_TYPE_SIGNAL=403,a.VOIP_CONTENT_TYPE_MODIFY=404,a.VOIP_CONTENT_TYPE_ACCEPT_T=405,t.a=a},,,,,,function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=n(132),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];s()(this,e),this.mentionedType=0,this.mentionedTargets=[],this.type=t,this.mentionedType=n,this.mentionedTargets=i}return o()(e,[{key:"digest",value:function(){return"...digest..."}},{key:"encode",value:function(){var e=new r.a;return e.type=this.type,e.mentionedType=this.mentionedType,e.mentionedTargets=this.mentionedTargets,e}},{key:"decode",value:function(e){this.type=e.type,this.mentionedType=e.mentionedType,this.mentionedTargets=e.mentionedTargets}}]),e}();t.a=c},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=function(){function e(){s()(this,e)}return o()(e,null,[{key:"log",value:function(e){var t=new Date;console.log("["+t.toLocaleTimeString()+"] "+e)}}]),e}();t.a=r},,,,function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=function(){function e(){s()(this,e)}return o()(e,null,[{key:"b64_to_utf8",value:function(e){return decodeURIComponent(escape(atob(e)))}},{key:"utf8_to_b64",value:function(e){return btoa(unescape(encodeURIComponent(e)))}}]),e}();t.a=r},,,,,,,,,,,,function(e,t,n){"use strict";var i=n(10),s=n(447);i.default.use(s.a);var a=new s.a({routes:[{path:"/login",component:n(430)},{path:"/",component:n(431),redirect:"conversation",children:[{path:"conversation",name:"conversation",component:n(427),hidden:!0},{path:"friend",name:"friend",component:n(428),hidden:!0}]}],linkActiveClass:"active"});t.a=a},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e)};a.Single=0,a.Group=1,a.ChatRoom=2,a.Channel=3,t.a=a},,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e)};a.STATUS_IDLE=0,a.STATUS_OUTGOING=1,a.STATUS_INCOMING=2,a.STATUS_CONNECTING=3,a.STATUS_CONNECTED=4,t.a=a},function(e,t,n){"use strict";var i=n(43),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=function(){function e(){o()(this,e)}return c()(e,null,[{key:"addReceiveMessageListener",value:function(e){this.onReceiveMessageListeners.push(e)}},{key:"onReceiveMessage",value:function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=s()(this.onReceiveMessageListeners);!(t=(a=o.next()).done);t=!0){a.value.onReceiveMessage(e)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"removeOnReceiveMessageListener",value:function(){e.onReceiveMessageListeners=[]}}]),e}();l.onReceiveMessageListeners=[],t.a=l},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=n(6),c=n(278),l=n(273),u=n(254),d=n(259),f=n(260),h=n(266),g=n(265),v=n(257),p=n(268),m=n(258),y=n(16),C=n(267),_=n(255),w=n(264),k=n(256),I=n(261),S=n(263),T=function(){function e(t,n,i,a,o,r,c){s()(this,e),this.handlerList=[],this.userDisconnect=!1,this.ws_protocol=t,this.ip=n,this.port=i,this.heartbeatTimeout=a,this.reconnectInterval=o,this.binaryType=r,this.url=t+"://"+n+":"+i,this.vuexStore=c,this.initHandlerList()}return o()(e,[{key:"connect",value:function(e){this.ws=new WebSocket(this.url),console.log("current url "+this.url+" status "+this.ws.readyState),this.ws.binaryType=this.binaryType;var t=this;this.ws.onopen=function(e){console.log("ws open"),t.lastInteractionTime((new Date).getTime()),t.pingIntervalId=setInterval(function(){t.ping()},t.heartbeatTimeout),t.userDisconnect=!1,t.sendConnectMessage()},this.ws.onmessage=function(e){console.log("ws onmessage["+e.data+"]"),t.processMessage(e.data),t.lastInteractionTime((new Date).getTime())},this.ws.onclose=function(e){console.log("ws onclose"),t.ws.close(),clearInterval(t.pingIntervalId),t.userDisconnect||(console.log("reconnect websocket"),t.reconnect(e))},this.ws.onerror=function(e){console.log("connect error")}}},{key:"reconnect",value:function(e){var t=this;setTimeout(function(){t.connect(!0)},this.reconnectInterval)}},{key:"lastInteractionTime",value:function(e){this.actionTime=e}},{key:"getLastActionTime",value:function(){return this.actionTime}},{key:"ping",value:function(){this.send("心跳内容")}},{key:"send",value:function(e){console.log("send message "+e),this.ws.send(e)}},{key:"sendAction",value:function(e,t){this.vuexStore.dispatch(e,t)}},{key:"initHandlerList",value:function(){this.handlerList.push(new u.a(this)),this.handlerList.push(new d.a(this)),this.handlerList.push(new f.a(this)),this.handlerList.push(new h.a(this)),this.handlerList.push(new g.a(this)),this.handlerList.push(new v.a(this)),this.handlerList.push(new p.a(this)),this.handlerList.push(new m.a(this)),this.handlerList.push(new C.a(this)),this.handlerList.push(new _.a(this)),this.handlerList.push(new w.a(this)),this.handlerList.push(new k.a(this)),this.handlerList.push(new I.a(this)),this.handlerList.push(new S.a(this))}},{key:"processMessage",value:function(e){for(var t=JSON.parse(e),n=0;n<this.handlerList.length;n++)this.handlerList[n].match(t)&&this.handlerList[n].processMessage(t)}},{key:"sendConnectMessage",value:function(){console.log("userToken "+localStorage.getItem("vue-token"));var e=n.i(c.a)(localStorage.getItem("vue-token"));console.log("decryptToken "+e);var t=e.substring(0,e.indexOf("|"));e=e.substring(e.indexOf("|")+1);var i=e.substring(0,e.indexOf("|"));console.log("[pwd]->"+t+" [secret]->"+i);var s=n.i(c.b)(t,i);console.log("encrypt pwd: "+s);var a=new l.a;a.setSignal(r.i);var o={userName:y.a.getUserId(),password:s,clientIdentifier:localStorage.getItem(r.j)};a.content=o,console.log(a.toJson()),this.send(a.toJson())}},{key:"sendDisConnectMessage",value:function(){var e=new l.a;e.setSignal(r.k);var t={clearSession:1};e.content=t,console.log(e.toJson()),this.send(e.toJson()),this.userDisconnect=!0}},{key:"getFriend",value:function(){this.sendPublishMessage(r.l,{version:0})}},{key:"searchUser",value:function(e){var t={keyword:e,fuzzy:1,page:0};this.sendPublishMessage(r.m,t)}},{key:"sendFriendAddRequest",value:function(e){this.sendPublishMessage(r.n,e)}},{key:"getFriendRequest",value:function(e){this.sendPublishMessage(r.o,{version:e})}},{key:"handleFriendRequest",value:function(e){this.sendPublishMessage(r.p,e)}},{key:"getUserInfos",value:function(e){this.sendPublishMessage(r.q,e)}},{key:"getGroupInfo",value:function(e,t){var n=[];n.push(e),this.sendPublishMessage(r.r,n)}},{key:"pullMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.sendPublishMessage(r.s,{messageId:e,type:t,pullType:n,sendMessageCount:i})}},{key:"getUploadToken",value:function(e){var t={mediaType:e};this.sendPublishMessage(r.t,t)}},{key:"sendPublishMessage",value:function(e,t){var n=new l.a;n.setSignal(r.u),n.setSubSignal(e),n.setContent(t),this.send(n.toJson())}},{key:"sendMessage",value:function(e){this.sendPublishMessage(r.v,e)}}]),e}();t.a=T},function(e,t,n){"use strict";var i=n(43),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(134),u=n(271),d=n(20),f=n(138),h=n(272),g=n(128),v=n(124),p=n(125),m=n(127),y=n(129),C=n(126),_=n(251),w=function(){function e(){o()(this,e)}return c()(e,null,[{key:"getMessageContentClazz",value:function(t){var n=!0,i=!1,a=void 0;try{for(var o,r=s()(e.MessageContents);!(n=(o=r.next()).done);n=!0){var c=o.value;if(c.type===t)return c.contentClazz?c.contentClazz:h.a}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}return console.log("message type "+t+" is unknown"),u.a}},{key:"getMessageContentPersitFlag",value:function(t){var n=!0,i=!1,a=void 0;try{for(var o,r=s()(e.MessageContents);!(n=(o=r.next()).done);n=!0){var c=o.value;if(c.type===t)return c.flag}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}return 0}},{key:"isDisplayableMessage",value:function(t){var n=t.content;return e.getMessageContentPersitFlag(n.type)==l.a.Persist||e.getMessageContentPersitFlag(n.type)==l.a.Persist_And_Count}}]),e}();w.MessageContents=[{name:"unknown",flag:l.a.Persist,type:d.a.Unknown,contentClazz:u.a},{name:"text",flag:l.a.Persist_And_Count,type:d.a.Text,contentClazz:f.a},{name:"ptext",flag:l.a.Persist,type:d.a.P_Text},{name:"voice",flag:l.a.Persist_And_Count,type:d.a.Voice},{name:"image",flag:l.a.Persist_And_Count,type:d.a.Image,contentClazz:y.a},{name:"location",flag:l.a.Persist_And_Count,type:d.a.Location},{name:"file",flag:l.a.Persist_And_Count,type:d.a.File},{name:"video",flag:l.a.Persist_And_Count,type:d.a.Video},{name:"sticker",flag:l.a.Persist_And_Count,type:d.a.Sticker},{name:"imageText",flag:l.a.Persist_And_Count,type:d.a.ImageText},{name:"tip",flag:l.a.Persist,type:d.a.Tip_Notification},{name:"typing",flag:l.a.Transparent,type:d.a.Typing},{name:"addGroupMemberNotification",flag:l.a.Persist,type:d.a.AddGroupMember_Notification},{name:"changeGroupNameNotification",flag:l.a.Persist,type:d.a.ChangeGroupName_Notification},{name:"changeGroupPortraitNotification",flag:l.a.Persist,type:d.a.ChangeGroupPortrait_Notification},{name:"createGroupNotification",flag:l.a.Persist,type:d.a.CreateGroup_Notification},{name:"dismissGroupNotification",flag:l.a.Persist,type:d.a.DismissGroup_Notification},{name:"kickoffGroupMemberNotification",flag:l.a.Persist,type:d.a.KickOffGroupMember_Notification},{name:"modifyGroupAliasNotification",flag:l.a.Persist,type:d.a.ModifyGroupAlias_Notification},{name:"quitGroupNotification",flag:l.a.Persist,type:d.a.QuitGroup_Notification},{name:"transferGroupOwnerNotification",flag:l.a.Persist,type:d.a.TransferGroupOwner_Notification},{name:"recall",flag:l.a.Persist,type:d.a.RecallMessage_Notification},{name:"callStartMessageContent",flag:l.a.Persist,type:d.a.VOIP_CONTENT_TYPE_START,contentClazz:g.a},{name:"callAnswerMessageContent",flag:l.a.No_Persist,type:d.a.VOIP_CONTENT_TYPE_ACCEPT,contentClazz:v.a},{name:"callAnswerTMessageContent",flag:l.a.Transparent,type:d.a.VOIP_CONTENT_TYPE_ACCEPT_T,contentClazz:p.a},{name:"callByeMessageContent",flag:l.a.No_Persist,type:d.a.VOIP_CONTENT_TYPE_END,contentClazz:C.a},{name:"callSignalMessageContent",flag:l.a.Transparent,type:d.a.VOIP_CONTENT_TYPE_SIGNAL,contentClazz:m.a},{name:"callModifyMessageContent",flag:l.a.No_Persist,type:d.a.VOIP_CONTENT_TYPE_MODIFY,contentClazz:_.a},{name:"callAddParticipant",flag:l.a.Persist,type:d.a.VOIP_CONTENT_TYPE_ADD_PARTICIPANT},{name:"callMuteVideo",flag:l.a.No_Persist,type:d.a.VOIP_CONTENT_TYPE_MUTE_VIDEO}],t.a=w},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e),this.unread=0,this.unreadMention=0,this.unreadMentionAll=0};t.a=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(21),s=n.n(i),a=n(43),o=n.n(a),r=n(60),c=n.n(r),l=n(10),u=n(25),d=n(58),f=n(74),h=n(253),g=n(6),v=n(277),p=n(140),m=n(130),y=n(135),C=n(59),_=n(16),w=n(139),k=n(76),I=n(178),S=n(75),T=n(73),b=n(136),x=n(42);l.default.use(u.b);var A=(new Date,{searchText:"",user:{name:"ratel",img:"static/images/vue.jpg"},friendlist:[{id:0,wxid:"new",initial:"新的朋友",img:"static/images/newfriend.jpg",signature:"",nickname:"新的朋友",sex:0,remark:"新的朋友",area:""}],friendIds:[],emojis:[{file:"100.gif",code:"/::)",title:"微笑",reg:/\/::\)/g},{file:"101.gif",code:"/::~",title:"伤心",reg:/\/::~/g},{file:"102.gif",code:"/::B",title:"美女",reg:/\/::B/g},{file:"103.gif",code:"/::|",title:"发呆",reg:/\/::\|/g},{file:"104.gif",code:"/:8-)",title:"墨镜",reg:/\/:8-\)/g},{file:"105.gif",code:"/::<",title:"哭",reg:/\/::</g},{file:"106.gif",code:"/::$",title:"羞",reg:/\/::\$/g},{file:"107.gif",code:"/::X",title:"哑",reg:/\/::X/g},{file:"108.gif",code:"/::Z",title:"睡",reg:/\/::Z/g},{file:"109.gif",code:"/::'(",title:"哭",reg:/\/::'\(/g},{file:"110.gif",code:"/::-|",title:"囧",reg:/\/::-\|/g},{file:"111.gif",code:"/::@",title:"怒",reg:/\/::@/g},{file:"112.gif",code:"/::P",title:"调皮",reg:/\/::P/g},{file:"113.gif",code:"/::D",title:"笑",reg:/\/::D/g},{file:"114.gif",code:"/::O",title:"惊讶",reg:/\/::O/g},{file:"115.gif",code:"/::(",title:"难过",reg:/\/::\(/g},{file:"116.gif",code:"/::+",title:"酷",reg:/\/::\+/g},{file:"117.gif",code:"/:--b",title:"汗",reg:/\/:--b/g},{file:"118.gif",code:"/::Q",title:"抓狂",reg:/\/::Q/g},{file:"119.gif",code:"/::T",title:"吐",reg:/\/::T/g},{file:"120.gif",code:"/:,@P",title:"笑",reg:/\/:,@P/g},{file:"121.gif",code:"/:,@-D",title:"快乐",reg:/\/:,@-D/g},{file:"122.gif",code:"/::d",title:"奇",reg:/\/::d/g},{file:"123.gif",code:"/:,@o",title:"傲",reg:/\/:,@o/g},{file:"124.gif",code:"/::g",title:"饿",reg:/\/::g/g},{file:"125.gif",code:"/:|-)",title:"累",reg:/\/:\|-\)/g},{file:"126.gif",code:"/::!",title:"吓",reg:/\/::!/g},{file:"127.gif",code:"/::L",title:"汗",reg:/\/::L/g},{file:"128.gif",code:"/::>",title:"高兴",reg:/\/::>/g},{file:"129.gif",code:"/::,@",title:"闲",reg:/\/::,@/g},{file:"130.gif",code:"/:,@f",title:"努力",reg:/\/:,@f/g},{file:"131.gif",code:"/::-S",title:"骂",reg:/\/::-S/g},{file:"133.gif",code:"/:,@x",title:"秘密",reg:/\/:,@x/g},{file:"134.gif",code:"/:,@@",title:"乱",reg:/\/:,@@/g},{file:"135.gif",code:"/::8",title:"疯",reg:/\/::8/g},{file:"136.gif",code:"/:,@!",title:"哀",reg:/\/:,@!/g},{file:"137.gif",code:"/:!!!",title:"鬼",reg:/\/:!!!/g},{file:"138.gif",code:"/:xx",title:"打击",reg:/\/:xx/g},{file:"139.gif",code:"/:bye",title:"bye",reg:/\/:bye/g},{file:"142.gif",code:"/:handclap",title:"鼓掌",reg:/\/:handclap/g},{file:"145.gif",code:"/:<@",title:"什么",reg:/\/:<@/g},{file:"147.gif",code:"/::-O",title:"累",reg:/\/::-O/g},{file:"153.gif",code:"/:@x",title:"吓",reg:/\/:@x/g},{file:"155.gif",code:"/:pd",title:"刀",reg:/\/:pd/g},{file:"156.gif",code:"/:<W>",title:"水果",reg:/\/:<W>/g},{file:"157.gif",code:"/:beer",title:"酒",reg:/\/:beer/g},{file:"158.gif",code:"/:basketb",title:"篮球",reg:/\/:basketb/g},{file:"159.gif",code:"/:oo",title:"乒乓",reg:/\/:oo/g},{file:"195.gif",code:"/:circle",title:"跳舞",reg:/\/:circle/g},{file:"160.gif",code:"/:coffee",title:"咖啡",reg:/\/:coffee/g}],selectId:1,selectTarget:"",selectFriendId:0,vueSocket:null,voipClient:null,conversations:[],messages:[],searchUsers:[],friendRequests:[],newFriendRequestCount:0,deviceId:"",userId:"",token:"",userInfos:new c.a,notify:"",firstLogin:!1,changeFullScreenMode:!1,appHeight:638,visibilityState:"hidden",showChatBox:!1,showAudioBox:!1,showSearchFriendDialog:!1}),M={initData:function(e){e.userId=localStorage.getItem("vue-user-id"),e.token=localStorage.getItem("vue-token");var t=new f.a(g.a,g.b,g.c,g.d,g.e,g.f,N);t.connect(!0),e.vueSocket=t,e.voipClient=new h.a(N);var n=_.a.getConversations();n&&(e.conversations=n);var i=_.a.getMessages();i&&(e.messages=i),e.selectTarget=_.a.getSelectTarget(),e.notify=new I.a({effect:"flash",interval:500,onclick:function(){console.log("on click"),e.notify.close()}})},search:function(e,t){e.searchText=t},selectSession:function(e,t){e.selectId=t},selectConversation:function(e,t){e.selectTarget=t;var n=e.conversations.find(function(e){return e.conversationInfo.target===t});n&&n.conversationInfo.unreadCount&&(n.conversationInfo.unreadCount.unread=0)},clearUnreadStatus:function(e){var t=e.conversations.find(function(t){return t.conversationInfo.target===e.selectTarget});t&&t.conversationInfo.unreadCount&&(t.conversationInfo.unreadCount.unread=0)},selectFriend:function(e,t){e.selectFriendId=t,0===t&&(e.newFriendRequestCount=0,e.vueSocket.getFriendRequest(_.a.getFriendRequestVersion()))},updateFriendList:function(e,t){0===e.friendlist.length&&e.friendlist.push({id:0,wxid:"new",initial:"新的朋友",img:"static/images/newfriend.jpg",signature:"",nickname:"新的朋友",sex:0,remark:"新的朋友",area:""});for(var n in t){var i=t[n];if(i.wxid!=e.userId){var s=e.friendIds.find(function(e){return e===i.wxid});if(x.a.log("current user id "+s+" state friend length "+e.friendlist.length),s){var a=!1;for(var r in e.friendlist){var c=e.friendlist[r];if(c.wxid===i.wxid){a=!0,e.friendlist.splice(r,1,i);break}}x.a.log("uid "+s+" isExist "+a),a||e.friendlist.push(i)}}}var l=!0,u=!1,d=void 0;try{for(var f,h=o()(e.conversations);!(l=(f=h.next()).done);l=!0){var g=f.value,c=e.friendlist.find(function(e){return e.wxid===g.conversationInfo.target});c&&(g.name=c.nickname,g.img=c.img)}}catch(e){u=!0,d=e}finally{try{!l&&h.return&&h.return()}finally{if(u)throw d}}var v=!0,p=!1,m=void 0;try{for(var y,C=o()(e.messages);!(v=(y=C.next()).done);v=!0){var _=y.value,c=e.friendlist.find(function(e){return e.wxid===_.target});c&&(_.name=c.nickname)}}catch(e){p=!0,m=e}finally{try{!v&&C.return&&C.return()}finally{if(p)throw m}}},updateUserInfos:function(e,t){var n=e.userInfos;n||(n=new c.a);var i=!0,s=!1,a=void 0;try{for(var r,l=o()(t);!(i=(r=l.next()).done);i=!0){var u=r.value;console.log("uid "+u.uid+" portrait "+u.portrait),u.uid===e.userId&&(e.user.img=u.portrait,e.user.name=u.displayName),n.set(u.uid,u)}}catch(e){s=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(s)throw a}}e.userInfos=n},sendMessage:function(e,t){var n=m.a.toMessage(e,t),i=y.a.convertToProtoMessage(n);if(console.log("send protomessage "+s()(i)),S.a.isDisplayableMessage(i)){var a=e.conversations.find(function(e){return e.conversationInfo.target===i.target});a.conversationInfo.lastMessage=i,a.conversationInfo.timestamp=i.timestamp;var o=e.messages.find(function(e){return e.target===i.target});if(o)o.protoMessages.push(i);else{o=new p.a,o.target=i.target;var r=e.friendlist.find(function(e){return e.wxid===i.target});null!=r&&(o.name=r.nickname),o.protoMessages.push(i),e.messages.push(o)}}e.vueSocket.sendMessage(i)},send:function(e){var t=e.friendlist.find(function(t){return t.id===e.selectFriendId}),n=e.conversations.find(function(e){return e.conversationInfo.target===t.wxid});if(n)e.selectTarget=n.conversationInfo.target;else{e.selectTarget=t.wxid;var i=new w.a;i.conversationType=C.a.Single,i.target=t.wxid,i.line=0,i.top=!1,i.slient=!1,i.timestamp=(new Date).getTime(),i.unreadCount=new k.a,i.lastMessage=null;var s=new v.a;s.name=t.remark,s.img=t.img,s.conversationInfo=i,e.conversations.unshift(s)}d.a.push({path:"/conversation"})},updateConversationInfo:function(e,t){var n,i,s=!1;for(var a in e.conversations){var o=e.conversations[a];if(o.conversationInfo.conversationType==t.conversationType&&o.conversationInfo.target==t.target){s=!0,i=a,o.conversationInfo.lastMessage=t.lastMessage,o.conversationInfo.timestamp=t.lastMessage.timestamp,n=o;break}}if(s&&(e.conversations.splice(i,1),e.conversations.unshift(n)),!s){if(n=new v.a,n.conversationInfo=t,t.conversationType==C.a.Single){var r=e.friendlist.find(function(e){return e.wxid===t.target});if(null!=r){var c=r.nickname,l=null==r.img?"static/images/vue.jpg":r.img;n.name=c,n.img=l}else n.name=t.target,n.img="static/images/vue.jpg"}else n.name=t.target,n.img||e.vueSocket.getGroupInfo(t.target,!1),n.img="static/images/vue.jpg";e.conversations.push(n)}var u=e.selectTarget===t.target,d="visible"===e.visibilityState,f=1===t.lastMessage.direction;if(!e.firstLogin&&(!u||u&&!d)&&f){var h=n.conversationInfo.unreadCount.unread+=1,g=t.lastMessage.content.searchableContent;console.log("target "+t.target+" unread count "+h+" notify body "+g),g||(g=b.a.typeToContent(t.lastMessage.content)),e.firstLogin||e.notify.notify({title:n.name,body:g,icon:n.img})}},updateConversationIntro:function(e,t){var n=!0,i=!1,s=void 0;try{for(var a,r=o()(t);!(n=(a=r.next()).done);n=!0){var c=a.value,l=e.conversations.find(function(e){return e.name===c.target});l&&(console.log("update conversation name "+l.name),l.name=c.name,c.portrait&&(l.img=c.portrait));var u=e.messages.find(function(e){return e.target===c.target});u&&(u.name=c.name+"("+c.memberCount+")")}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}},addProtoMessage:function(e,t){var n=!1,i=!1,s=!0,a=!1,r=void 0;try{for(var c,l=o()(e.messages);!(s=(c=l.next()).done);s=!0){var u=c.value;if(t.target==u.target){n=!0;u.protoMessages.find(function(e){return e.messageId===t.messageId})?i=!0:u.protoMessages.push(t)}}}catch(e){a=!0,r=e}finally{try{!s&&l.return&&l.return()}finally{if(a)throw r}}if(!n){var u=new p.a,d=e.friendlist.find(function(e){return e.wxid===t.target});null!=d&&(u.name=d.nickname),u.target=t.target,u.protoMessages.push(t),e.messages.push(u)}if(!i){var f=new w.a;f.conversationType=t.conversationType,f.target=t.target,f.line=0,f.top=!1,f.slient=!1,f.timestamp=t.timestamp,f.lastMessage=t,f.unreadCount=new k.a,this.commit("updateConversationInfo",f)}},loginOut:function(e,t){e.userId="",e.token="",localStorage.setItem(g.g,""),localStorage.setItem(g.h,""),e.selectTarget="",e.vueSocket.sendDisConnectMessage(),e.vueSocket=null,e.voipClient=null,e.conversations=[],e.messages=[],e.friendlist=[],e.friendIds=[],_.a.clearLocalStore(),T.a.removeOnReceiveMessageListener(),d.a.push({path:"/login"})},changetFirstLogin:function(e,t){console.log("first login "+t),e.firstLogin=t},getUploadToken:function(e,t){e.vueSocket.getUploadToken(t)},visibilityChange:function(e,t){e.visibilityState=t},searchUser:function(e,t){e.vueSocket.searchUser(t)},updateSearchUser:function(e,t){e.searchUsers=[];var n=!0,i=!1,s=void 0;try{for(var a,r=o()(t);!(n=(a=r.next()).done);n=!0){var c=a.value;e.friendlist.find(function(e){return e.wxid===c.uid})||c.uid===e.userId||e.searchUsers.push(c)}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}},sendFriendAddRequest:function(e,t){e.vueSocket.sendFriendAddRequest(t)},updateFriendRequest:function(e,t){var n=!0,i=!1,s=void 0;try{for(var a,r=o()(t);!(n=(a=r.next()).done);n=!0){var c=a.value,l=e.friendRequests.find(function(e){return e.from===c.from});l?l.status=c.status:(e.newFriendRequestCount+=1,e.friendRequests.push(c))}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}},handleFriendRequest:function(e,t){e.friendRequests.find(function(e){return e.from===t.targetUid}).status=1,e.vueSocket.handleFriendRequest(t)},updateFriendIds:function(e,t){t&&(e.friendIds=t)}},E={searchedConversationList:function(){return A.conversations.filter(function(e){return!!e.name&&e.name.includes(A.searchText)})},isSingleConversation:function(){var e=A.conversations.find(function(e){return e.conversationInfo.target===A.selectTarget});return!!e&&e.conversationInfo.conversationType===C.a.Single},searchedFriendlist:function(e){return e.friendlist.filter(function(t){return t.remark.includes(e.searchText)})},selectedChat:function(e){var t=e.messages.find(function(t){return t.target===e.selectTarget});return null==t&&(t={name:"",target:"",protoMessages:[]}),console.log("selectedChat "+t.name+" target "+t.target),t},selectedFriend:function(e){return e.friendlist.find(function(t){return t.id===e.selectFriendId})},messages:function(e){var t=e.messages.find(function(t){return t.target===e.selectTarget});return null==t?[]:t.protoMessages},userInfos:function(){return A.userInfos},unreadTotalCount:function(e){var t=0;if(e.conversations){var n=!0,i=!1,s=void 0;try{for(var a,r=o()(e.conversations);!(n=(a=r.next()).done);n=!0){var c=a.value;c.conversationInfo.unreadCount&&(t+=c.conversationInfo.unreadCount.unread)}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}}return 0===t?(e.notify.faviconClear(),e.notify.setTitle(),e.notify.close()):(e.notify.setFavicon(t),e.notify.setTitle("你有新的消息未读")),t}},P={search:function(e,t){var n=e.commit;setTimeout(function(){n("search",t)},100)},selectSession:function(e,t){return(0,e.commit)("selectSession",t)},selectConversation:function(e,t){return(0,e.commit)("selectConversation",t)},clearUnreadStatus:function(e,t){return(0,e.commit)("clearUnreadStatus",t)},selectFriend:function(e,t){return(0,e.commit)("selectFriend",t)},updateFriendList:function(e,t){return(0,e.commit)("updateFriendList",t)},updateUserInfos:function(e,t){return(0,e.commit)("updateUserInfos",t)},sendMessage:function(e,t){return(0,e.commit)("sendMessage",t)},send:function(e){return(0,e.commit)("send")},initData:function(e){return(0,e.commit)("initData")},updateConversationInfo:function(e,t){return(0,e.commit)("updateConversationInfo",t)},updateConversationIntro:function(e,t){return(0,e.commit)("updateConversationIntro",t)},addProtoMessage:function(e,t){return(0,e.commit)("addProtoMessage",t)},loginOut:function(e,t){return(0,e.commit)("loginOut",t)},changetFirstLogin:function(e,t){return(0,e.commit)("changetFirstLogin",t)},getUploadToken:function(e,t){return(0,e.commit)("getUploadToken",t)},visibilityChange:function(e,t){return(0,e.commit)("visibilityChange",t)},searchUser:function(e,t){return(0,e.commit)("searchUser",t)},updateSearchUser:function(e,t){return(0,e.commit)("updateSearchUser",t)},sendFriendAddRequest:function(e,t){return(0,e.commit)("sendFriendAddRequest",t)},updateFriendRequest:function(e,t){return(0,e.commit)("updateFriendRequest",t)},handleFriendRequest:function(e,t){return(0,e.commit)("handleFriendRequest",t)},updateFriendIds:function(e,t){return(0,e.commit)("updateFriendIds",t)}},N=new u.b.Store({state:A,mutations:M,getters:E,actions:P});N.watch(function(e){return e.conversations},function(e){_.a.saveConverSations(e)},{deep:!0}),N.watch(function(e){return e.messages},function(e){_.a.saveMessages(e)},{deep:!0}),N.watch(function(e){return e.selectTarget},function(e){_.a.setSelectTarget(e)},{deep:!0}),t.a=N},,,,,,,,,,,function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(31),f=n.n(d),h=n(4),g=n.n(h),v=n(26),p=n(20),m=n(46),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,t),u()(this,(t.__proto__||s()(t)).call(this,p.a.VOIP_CONTENT_TYPE_ACCEPT,e,n))}return g()(t,e),c()(t,[{key:"digest",value:function(){return""}},{key:"encode",value:function(){var e=f()(t.prototype.__proto__||s()(t.prototype),"encode",this).call(this);e.content=this.callId;var n;return n=this.audioOnly?"1":"0",e.binaryContent=m.a.utf8_to_b64(n),e}},{key:"decode",value:function(e){f()(t.prototype.__proto__||s()(t.prototype),"decode",this).call(this,e),this.callId=e.content;var n=m.a.b64_to_utf8(e.binaryContent);this.audioOnly="1"===n}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(31),f=n.n(d),h=n(4),g=n.n(h),v=n(26),p=n(20),m=n(46),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,t),u()(this,(t.__proto__||s()(t)).call(this,p.a.VOIP_CONTENT_TYPE_ACCEPT_T,e,n))}return g()(t,e),c()(t,[{key:"digest",value:function(){return""}},{key:"encode",value:function(){var e=f()(t.prototype.__proto__||s()(t.prototype),"encode",this).call(this);e.content=this.callId;var n;return n=this.audioOnly?"1":"0",e.binaryContent=m.a.utf8_to_b64(n),e}},{key:"decode",value:function(e){f()(t.prototype.__proto__||s()(t.prototype),"decode",this).call(this,e),this.callId=e.content;var n=m.a.b64_to_utf8(e.binaryContent);this.audioOnly="1"===n}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(31),f=n.n(d),h=n(4),g=n.n(h),v=n(26),p=n(20),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,t),u()(this,(t.__proto__||s()(t)).call(this,p.a.VOIP_CONTENT_TYPE_END,e,n))}return g()(t,e),c()(t,[{key:"digest",value:function(){return""}},{key:"encode",value:function(){var e=f()(t.prototype.__proto__||s()(t.prototype),"encode",this).call(this);return e.content=this.callId,e}},{key:"decode",value:function(e){f()(t.prototype.__proto__||s()(t.prototype),"decode",this).call(this,e),this.callId=e.content}}]),t}(v.a);t.a=m},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(31),f=n.n(d),h=n(4),g=n.n(h),v=n(26),p=n(20),m=n(46),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,t),u()(this,(t.__proto__||s()(t)).call(this,p.a.VOIP_CONTENT_TYPE_SIGNAL,e,n))}return g()(t,e),c()(t,[{key:"digest",value:function(){return""}},{key:"encode",value:function(){var e=f()(t.prototype.__proto__||s()(t.prototype),"encode",this).call(this);return e.content=this.callId,e.binaryContent=m.a.utf8_to_b64(this.payload),e}},{key:"decode",value:function(e){f()(t.prototype.__proto__||s()(t.prototype),"decode",this).call(this,e),this.callId=e.content,this.payload=m.a.b64_to_utf8(e.binaryContent)}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(21),s=n.n(i),a=n(3),o=n.n(a),r=n(0),c=n.n(r),l=n(1),u=n.n(l),d=n(5),f=n.n(d),h=n(31),g=n.n(h),v=n(4),p=n.n(v),m=n(26),y=n(20),C=n(46),_=function(e){function t(e,n,i){c()(this,t);var s=f()(this,(t.__proto__||o()(t)).call(this,y.a.VOIP_CONTENT_TYPE_START));return s.callId=e,s.targetId=n,s.audioOnly=i,s}return p()(t,e),u()(t,[{key:"digest",value:function(){return this.audioOnly?"[语音通话]":"[视频通话]"}},{key:"encode",value:function(){var e=g()(t.prototype.__proto__||o()(t.prototype),"encode",this).call(this);e.content=this.callId;var n={c:this.connectTime,e:this.endTime,s:this.status,a:this.audioOnly?1:0,t:this.targetId};return e.binaryContent=C.a.utf8_to_b64(s()(n)),e}},{key:"decode",value:function(e){g()(t.prototype.__proto__||o()(t.prototype),"decode",this).call(this,e),this.callId=e.content;var n=C.a.b64_to_utf8(e.binaryContent),i=JSON.parse(n);this.connectTime=i.c,this.endTime=i.e,this.status=i.s,this.audioOnly=1===i.a,this.targetId=i.t}}]),t}(m.a);t.a=_},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(31),f=n.n(d),h=n(4),g=n.n(h),v=n(270),p=n(131),m=n(20),y=function(e){function t(e,n,i){o()(this,t);var a=u()(this,(t.__proto__||s()(t)).call(this,m.a.Image,p.a.Image,e,n));return a.thumbnail=i,a}return g()(t,e),c()(t,[{key:"digest",value:function(){return"[图片]"}},{key:"encode",value:function(){var e=f()(t.prototype.__proto__||s()(t.prototype),"encode",this).call(this);return e.mediaType=p.a.Image,e.binaryContent=this.thumbnail,e}},{key:"decode",value:function(e){f()(t.prototype.__proto__||s()(t.prototype),"decode",this).call(this,e),this.thumbnail=e.binaryContent}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=n(274),c=n(133),l=function(){function e(){s()(this,e),this.conversation={},this.from="",this.content={},this.messageId=0,this.direction=0,this.status=0,this.messageUid=0,this.timestamp=0,this.to=""}return o()(e,null,[{key:"toMessage",value:function(t,n){var i=new e,s=n.target;s||(s=t.selectTarget),console.log("to message target "+s);var a=t.conversations.find(function(e){return e.conversationInfo.target===s});return console.log("conversationtype "+a.conversationInfo.conversationType+" target "+a.conversationInfo.target),i.conversation=new r.a(a.conversationInfo.conversationType,a.conversationInfo.target,a.conversationInfo.line),i.content=n.messageContent,i.from=t.userId,i.status=c.a.Sending,i.timestamp=(new Date).getTime(),i.direction=0,i.messageId=(new Date).getTime(),i}}]),e}();t.a=l},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e)};a.General=0,a.Image=1,a.Voice=2,a.Video=3,a.File=4,a.Portrait=5,a.Fvaorite=6,t.a=a},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e),this.mentionedType=0,this.mentionedTargets=[]};t.a=a},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e)};a.Sending=0,a.Sent=1,a.SendFailure=2,a.Mentioned=3,a.AllMentioned=4,a.Unread=5,a.Readed=6,a.Played=7,t.a=a},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e)};a.No_Persist=0,a.Persist=1,a.Persist_And_Count=3,a.Transparent=4,t.a=a},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=n(133),c=n(59),l=n(136),u=n(16),d=function(){function e(){s()(this,e),this.from="",this.content={},this.messageId=0,this.direction=0,this.status=0,this.messageUid=0,this.timestamp=0,this.to=""}return o()(e,null,[{key:"toProtoMessage",value:function(t){var n=u.a.getUserId(),i=new e;return t.from==n?(i.direction=0,i.status=r.a.Sent):(i.direction=1,i.status=r.a.Unread),i.messageId=t.messageId,i.messageUid=t.messageId,i.timestamp=t.timestamp,i.conversationType=t.conversationType,i.target=t.target,i.from=t.from,i.conversationType==c.a.Single&&(t.from!=n?(i.target=t.from,i.from=t.from):(i.target=t.target,i.from=t.from)),i.line=t.line,i.content=l.a.toProtoMessageContent(t.content),i}},{key:"convertToProtoMessage",value:function(t){var n=new e;n.conversationType=t.conversation.type,n.target=t.conversation.target,n.line=t.conversation.line,n.from=t.from,n.direction=t.direction,n.status=t.status,n.messageId=t.messageId,n.messageUid=t.messageUid,n.timestamp=t.timestamp;var i=t.content.encode();return n.content=l.a.toProtoMessageContent(i),n}}]),e}();t.a=d},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=n(20),c=function(){function e(){s()(this,e),this.mentionedType=0,this.mentionedTargets=[]}return o()(e,null,[{key:"toProtoMessageContent",value:function(t){var n=new e;return n.type=t.type,n.content=t.content,n.searchableContent=t.searchableContent,n.pushContent=t.pushContent,n.binaryContent=t.binaryContent,n.localContent=t.localContent,n.mediaType=t.mediaType,n.remoteMediaUrl=t.remoteMediaUrl,n.localMediaPath=t.localMediaPath,n.mentionedType=t.mentionedType,n.mentionedTargets=t.mentionedTargets,n}},{key:"typeToContent",value:function(e){var t="未知类型";switch(e.type){case r.a.Image:t="[图片]";break;case r.a.File:t="[文件]";break;case r.a.Video:t="[视频]";break;case r.a.VOIP_CONTENT_TYPE_START:t="[网络电话]";break;case r.a.Tip_Notification:t="[通知消息]"}return t}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(t,n){s()(this,e),this.target=t,this.messageContent=n};t.a=a},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(31),f=n.n(d),h=n(4),g=n.n(h),v=n(26),p=(n(132),n(20)),m=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o()(this,t);var a=u()(this,(t.__proto__||s()(t)).call(this,p.a.Text,n,i));return a.content=e,a}return g()(t,e),c()(t,[{key:"digest",value:function(){return this.content}},{key:"encode",value:function(){var e=f()(t.prototype.__proto__||s()(t.prototype),"encode",this).call(this);return e.searchableContent=this.content,e}},{key:"decode",value:function(e){f()(t.prototype.__proto__||s()(t.prototype),"decode",this).call(this,e),this.content=e.searchableContent}}]),t}(v.a);t.a=m},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(76),o=function e(){s()(this,e),this.lastMessage={},this.timestamp=0,this.draft="",this.unreadCount=new a.a,this.isTop=!1,this.isSilent=!1};t.a=o},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e),this.name="",this.protoMessages=[]};t.a=a},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=function(){function e(){s()(this,e),this.uid="",this.name="",this.displayName="",this.gender=0,this.portrait="",this.mobile="",this.email="",this.address="",this.social="",this.extra="",this.type=0,this.updateDt=1550652404513}return o()(e,null,[{key:"convert2UserInfo",value:function(t){var n=new e;return n.uid=t.uid,n.name=t.name,n.displayName=t.displayName,n.gender=t.gender,n.portrait=t.portrait,n.mobile=t.mobile,n.email=t.email,n.address=t.address,n.social=t.social,n.extra=t.extra,n.type=t.type,n.updateDt=t.updateDt,n}}]),e}();t.a=r},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=function(){function e(){s()(this,e)}return o()(e,null,[{key:"_formatDate",value:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}},{key:"getTimeStringAutoShort2",value:function(e,t){var n=new Date,i=new Date(parseInt(e)),s=n.getFullYear(),a=n.getMonth()+1,o=n.getDate(),r=i.getFullYear(),c=i.getMonth()+1,l=i.getDate(),u="",d=t?" "+this._formatDate(i,"hh:mm"):"";if(s==r){var f=n.getTime(),h=e,g=f-h;if(a==c&&o==l)u=g<6e4?"刚刚":this._formatDate(i,"hh:mm");else{var v=new Date;v.setDate(v.getDate()-1);var p=new Date;if(p.setDate(p.getDate()-2),c==v.getMonth()+1&&l==v.getDate())u="昨天"+d;else if(c==p.getMonth()+1&&l==p.getDate())u="前天"+d;else{var m=g/36e5;if(m<=168){var y=new Array(7);y[0]="星期日",y[1]="星期一",y[2]="星期二",y[3]="星期三",y[4]="星期四",y[5]="星期五",y[6]="星期六";var C=y[i.getDay()];u=C+d}else u=this._formatDate(i,"yy/M/d")+d}}}else u=this._formatDate(i,"yy/M/d")+d;return u}}]),e}();t.a=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(394);var i=n(13)(n(226),n(438),"data-v-300d4e33",null);e.exports=i.exports},function(e,t,n){"use strict";var i=n(58),s=(n(113),["/login"]);i.a.beforeEach(function(e,t,n){var i=localStorage.getItem("vue-token");console.log("match route token "+i+" to "+e.path+" from "+t.path+" next "+n.path),i?"/login"===e.path?n({path:"/conversation"}):n():-1!==s.indexOf(e.path)?n():n("/login")})},,function(e,t){},function(e,t,n){n(393);var i=n(13)(n(219),n(437),"data-v-2a75fd14",null);e.exports=i.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(449),s=n.n(i);t.default={name:"VueXgplayer",data:function(){return{player:null}},props:{config:{type:Object,default:function(){return{id:"mse",url:""}}},rootStyle:{type:Object,default:function(){return{}}}},methods:{init:function(){this.config.url&&""!==this.config.url&&(this.player=new s.a(this.config),this.$emit("player",this.player))}},mounted:function(){this.init()},beforeUpdate:function(){this.init()},beforeDestroy:function(){this.player&&"function"==typeof this.player.destroy&&this.player.destroy()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(n(25),n(429)),s=n.n(i);t.default={name:"AppChat",components:{searchfriend:s.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n.n(i),a=n(25),o=n(59),r=n(16),c=n(142);t.default={computed:s()({},n.i(a.a)(["selectId","selectTarget","searchText","appHeight"]),n.i(a.c)(["searchedConversationList"])),methods:s()({},n.i(a.d)(["selectSession","selectConversation"]),{processageGroupMessage:function(e){var t,n=e.conversationInfo;if(n.lastMessage){t=n.lastMessage.content.searchableContent,400===n.lastMessage.content.type&&(t="[网络电话]");var i=n.lastMessage.from===r.a.getUserId();if(n.conversationType==o.a.Group&&!i){var s=n.lastMessage.from;console.log("conversation group from "+s);var a=this.$store.state.userInfos.get(s),c="";a&&((c=a.displayName)||(c=a.mobile)),t=c+":"+n.lastMessage.content.searchableContent}}return t}}),filters:{time:function(e){return"string"==typeof e&&(e=new Date(e)),"number"==typeof e&&(e=new Date(e)),e.getMinutes()<10?e.getHours()+":0"+e.getMinutes():e.getHours()+":"+e.getMinutes()},getTimeStringAutoShort2:function(e){return c.a.getTimeStringAutoShort2(e,!1)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n.n(i),a=n(25);t.default={computed:s()({},n.i(a.a)(["selectFriendId","searchText","appHeight","newFriendRequestCount"]),n.i(a.c)(["searchedFriendlist"])),methods:s()({},n.i(a.d)(["selectFriend"]))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n.n(i),a=(n(58),n(25));n(16);t.default={computed:s()({},n.i(a.c)(["selectedFriend"]),n.i(a.a)(["friendRequests","appHeight"])),methods:{send:function(){this.$store.dispatch("send"),this.$store.dispatch("search","")},requestBtnMessage:function(e){return 1===e.status?"已添加":2===e.status?"已拒绝":0===e.status?"接受":void 0},handleFriendRequest:function(e){this.$store.dispatch("handleFriendRequest",{targetUid:e.from,status:1})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"addtip",methods:{showSearchFriendDialog:function(){this.$store.state.showSearchFriendDialog=!0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n.n(i),a=n(25),o=n(142),r=n(419),c=n.n(r),l=n(388),u=(n.n(l),n(417)),d=n.n(u),f=n(10),h=n(160),g=n.n(h);f.default.use(d.a),t.default={components:{Xgplayer:c.a},data:function(){return{Player:null}},computed:s()({},n.i(a.c)(["selectedChat","messages","userInfos"]),n.i(a.a)(["user","emojis","appHeight"])),mounted:function(){var e=this;setTimeout(function(){return e.$refs.list.scrollTop=e.$refs.list.scrollHeight},0)},watch:{messages:function(){var e=this;setTimeout(function(){return e.$refs.list.scrollTop=e.$refs.list.scrollHeight},0)}},methods:{replaceFace:function(e){if(e.includes("/:")){for(var t=this.emojis,n=0;n<t.length;n++)e=e.replace(t[n].reg,'<img src="static/emoji/'+t[n].file+'"  alt="" style="vertical-align: middle; width: 24px; height: 24px" />');return e}return e},isfaceMessage:function(e){return e.includes("/:")},isShowTime:function(e,t){var n=t[e].timestamp;if(e>0){if(n-t[e-1].timestamp>3e5)return!0}return!1},videoConfig:function(e){return{id:"vs"+e,url:e,height:330,width:250,autoplay:arguments.length>1&&void 0!==arguments[1]&&arguments[1],download:!0}},scrollEvent:function(e){var t=this.$refs.list.offsetHeight;e.srcElement.scrollHeight-e.srcElement.scrollTop>t&&this.$store.dispatch("clearUnreadStatus","")},messageBoxClick:function(e){this.$store.dispatch("clearUnreadStatus",""),console.log("message box click")},notification:function(e,t){var n=g.a.enc.Base64.parse(e).toString(g.a.enc.Utf8),i=JSON.parse(n);console.log("notify "+n);var s;switch(t){case 104:s="创建群组"+i.n;break;case 110:s="修改群名为"+i.n}return s},isNotification:function(e){return e>=80&&e<=117}},filters:{time:function(e){return"string"==typeof e&&(e=new Date(e)),"number"==typeof e&&(e=new Date(e)),e.getMinutes()<10?e.getHours()+":0"+e.getMinutes():e.getHours()+":"+e.getMinutes()},getTimeStringAutoShort2:function(e){return o.a.getTimeStringAutoShort2(e,!0)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n.n(i),a=n(25),o=n(423),r=n.n(o);t.default={components:{addtip:r.a},data:function(){return{showAddRequestTip:!1}},computed:s()({},n.i(a.a)(["user","newFriendRequestCount"]),n.i(a.c)(["unreadTotalCount"])),methods:{clearSearch:function(){this.$store.dispatch("search","")},loginOut:function(){this.$store.dispatch("loginOut","")},changeFullScreenMode:function(){var e=this.$store.state.changeFullScreenMode;console.log("change screen mode "+e);var t=this;t.$store.state.changeFullScreenMode=!e,setTimeout(function(){var e=t.$refs.mycardRef.offsetHeight;console.log("resize mycard height "+e),t.$store.state.appHeight=e},200)}},mounted:function(){var e=this;document.addEventListener("click",function(t){"string"==typeof t.target.className&&-1==t.target.className.search("icon-jiahaoyou")&&"add-content"!==t.target.className&&e.showAddRequestTip&&(e.showAddRequestTip=!1)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{change:function(){this.$store.dispatch("search",this.search)},del:function(){this.search="",this.change()}},data:function(){return{search:"",active:!1}},computed:{noText:function(){return""===this.search},haveText:function(){return""!==this.search}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n.n(i),a=(n(233),n(25)),o=n(138),r=n(129),c=n(408),l=(n.n(c),n(131)),u=n(16),d=n(252),f=n(250),h=n(137),g=n(72);t.default={data:function(){return{content:"",sendBtnDisabled:!0,reply:"未找到",frequency:0,warn:!1,showEmoji:!1,videoTextCallTips:"",voipClient:null,rejectCall:!1,cancelCall:!1,acceptCall:!1,hangUpCall:!1,showCallLocalImg:!0,showCallLocalVideo:!1,showCallRemoteImg:!0,showCallRemoteVideo:!1,showCallTips:!0,callRemoteImg:"static/images/vue.jpg",callLocalImg:"static/images/vue.jpg",callDisplayName:"",waitingMsg:!1,isAudioOnly:!1,waitingMsgTips:"",showTalkTime:!1,talkInterval:0,talkTime:"00:00",talkTimerInterval:null}},computed:s()({},n.i(a.a)(["selectId","emojis","showChatBox","showAudioBox"]),n.i(a.c)(["selectedChat","isSingleConversation","userInfos"])),methods:{sendPic:function(e){var t=this.$store;t.dispatch("getUploadToken",l.a.Image),console.log("sendpic "+e.target.value);var n=e.target.files[0],i=l.a.Image+"-"+localStorage.getItem("vue-user-id")+"-"+(new Date).getTime()+"-"+n.name;setTimeout(function(){var s=u.a.getImageUploadToken();if(console.log("upload file key "+i+" token "+s),s){var a=c.upload(n,i,s,null,null),o={next:function(e){console.log("uploading "+e.total.percent)},error:function(e){console.log("upload error "+e.code+" message "+e.message)},complete:function(n){console.log("upload complete "+n);var s=e.target.value,a="http://image.comsince.cn/"+i,o=new r.a(s,a,null);t.dispatch("sendMessage",new h.a(null,o))}};a.subscribe(o)}},200),this.$refs.uploadPic.value=null},sendMessage:function(e){console.log("send code "+e.keyCode),13===e.keyCode&&(this.send(),e.preventDefault())},newline:function(e){this.content=this.content+"\n",e.preventDefault()},onBlur:function(){console.log("send text onblur")},onFocus:function(){console.log("send text onfoucs"),this.$store.dispatch("clearUnreadStatus","")},send:function(){var e=this;if(console.log("send message "+this.content),this.content.length<1)this.warn=!0,this.content="",setTimeout(function(){e.warn=!1},1e3);else{var t=new o.a(this.content);this.sendMessageToStore(new h.a(null,t)),this.content="",this.$refs.text.focus()}},sendAudio:function(){this.$store.state.showAudioBox=!0,this.waitingMsg=!0,this.rejectCall=!1,this.acceptCall=!1,this.hangUpCall=!1,this.cancelCall=!0,this.initCallUserInfo(this.$store.state.selectTarget),this.isAudioOnly=!0,this.voipClient.startCall(this.$store.state.selectTarget,this.isAudioOnly)},sendVideo:function(){this.$store.state.showChatBox=!0,this.rejectCall=!1,this.acceptCall=!1,this.hangUpCall=!1,this.cancelCall=!0,this.showCallRemoteVideo=!1,this.showCallRemoteImg=!0,this.showCallTips=!0,this.videoTextCallTips="正在接通，请稍候...",this.initCallUserInfo(this.$store.state.selectTarget),this.isAudioOnly=!1,this.voipClient.startCall(this.$store.state.selectTarget,this.isAudioOnly)},initCallUserInfo:function(e){var t=this.getUserPortrait(e);t&&(this.callRemoteImg=t),this.callLocalImg=this.$store.state.user.img,this.callDisplayName=this.getDisplayName(e)},getUserPortrait:function(e){return this.userInfos?this.userInfos.get(e).portrait:null},getDisplayName:function(e){return this.userInfos.get(e).displayName},hangUp:function(){this.voipClient.cancelCall()},reject:function(){this.voipClient.cancelCall()},accept:function(){this.rejectCall=!1,this.acceptCall=!1,this.hangUpCall=!0,this.voipClient.answerCall(this.isAudioOnly)},cancel:function(){this.voipClient.cancelCall()},sendMessageToStore:function(e){this.$store.dispatch("sendMessage",e)}},mounted:function(){var e=this;this.$refs.text.focus();var t=new d.a,n=new f.a;n.onReceiveCall=function(t){e.isAudioOnly=t.audioOnly,console.log("receive isAudioOnly "+t.audioOnly),e.isAudioOnly?(e.$store.state.showAudioBox=!0,e.waitingMsg=!0,e.waitingMsgTips="对方邀请你进行语音通话",e.rejectCall=!0,e.acceptCall=!0,e.cancelCall=!1,e.hangUpCall=!1,e.initCallUserInfo(t.clientId)):(e.$store.state.showChatBox=!0,e.videoTextCallTips="对方邀请您进行视频通话",e.rejectCall=!0,e.cancelCall=!1,e.acceptCall=!0,e.hangUpCall=!1,e.showCallLocalImg=!0,e.showCallLocalVideo=!1,e.showCallRemoteImg=!0,e.showCallRemoteVideo=!1,e.showCallTips=!0,e.initCallUserInfo(t.clientId));try{document.getElementById("sendText").blur()}catch(e){console.error("get sendText error "+e)}},t.didChangeState=function(t){t===g.a.STATUS_CONNECTED&&(e.isAudioOnly?(e.cancelCall=!1,e.rejectCall=!1,e.acceptCall=!1,e.hangUpCall=!0,e.waitingMsg=!1):(e.cancelCall=!1,e.acceptCall=!1,e.rejectCall=!1,e.hangUpCall=!0),e.showTalkTime=!0,e.talkTimerInterval=setInterval(function(){e.talkInterval+=1;var t=Math.floor(e.talkInterval/60%60),n=Math.floor(e.talkInterval%60);n=n<10?"0"+n:n,t=t<10?"0"+t:t,e.talkTime=t+":"+n},1e3))},t.didReceiveRemoteAudioTrack=function(e){document.getElementById("wxCallRemoteAudio").srcObject=e},t.didCallEndWithReason=function(t){e.isAudioOnly?e.$store.state.showAudioBox=!1:e.$store.state.showChatBox=!1,e.talkTimerInterval&&(e.showTalkTime=!1,e.talkInterval=0,clearInterval(e.talkTimerInterval))},t.didCreateLocalVideoTrack=function(t){e.showCallLocalImg=!1,e.showCallLocalVideo=!0,document.getElementById("wxCallLocalVideo").srcObject=t},t.didReceiveRemoteVideoTrack=function(t){e.showCallRemoteImg=!1,e.showCallTips=!1,e.showCallRemoteVideo=!0,document.getElementById("wxCallRemoteVideo").srcObject=t},this.voipClient=this.$store.state.voipClient,this.voipClient.setCurrentSessionCallback(t),this.voipClient.setCurrentEngineCallback(n)},watch:{selectId:function(){var e=this;setTimeout(function(){e.$refs.text.focus()},0)},content:function(){""===this.content?(this.$refs.sendBtn.style.background="#f5f5f5",this.$refs.sendBtn.style.color="#7c7c7c",this.sendBtnDisabled=!0):(this.$refs.sendBtn.style.background="rgb(18,150,17)",this.$refs.sendBtn.style.color="#fff",this.sendBtnDisabled=!1)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(173),s=n.n(i),a=n(420),o=n.n(a),r=n(424),c=n.n(r),l=n(426),u=n.n(l);n(74),n(6);t.default={components:{search:s.a,chatlist:o.a,message:c.a,vText:u.a},mounted:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(173),s=n.n(i),a=n(421),o=n.n(a),r=n(422),c=n.n(r);t.default={components:{search:s.a,friendlist:o.a,info:c.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n.n(i),a=n(25);t.default={data:function(){return{friendInput:"",friendRequest:"",currentSearchUser:null,innerVisible:!1}},methods:{changeSearchFriendDialog:function(){this.$store.state.showSearchFriendDialog=!1},searchUser:function(e){console.log("search user "),13===e.keyCode&&""!=this.friendInput&&(this.$store.dispatch("searchUser",this.friendInput),this.friendInput="")},handleClose:function(){this.$store.dispatch("updateSearchUser",[])},sendFriendRequest:function(){this.innerVisible=!1,this.$store.dispatch("sendFriendAddRequest",{reason:this.friendRequest,targetUserId:this.currentSearchUser.uid})},showFriendRequestDialog:function(e){this.innerVisible=!0,this.friendRequest="我是"+this.$store.state.user.name,this.currentSearchUser=e}},computed:s()({},n.i(a.a)(["searchUsers"]),{showSearchFriendDialog:{get:function(){return this.$store.state.showSearchFriendDialog},set:function(e){this.$store.state.showSearchFriendDialog=e}}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),s=n.n(i),a=n(6),o=(n(25),n(416)),r=n.n(o),c=n(201),l=n.n(c);t.default={name:"Login",data:function(){return{mobile:"",code:"",loginAPI:a.B}},methods:{login:function(){var e=this,t=localStorage.getItem(a.j);null==t&&(t=r.a.create().toString(),console.log("generate device id "+t),localStorage.setItem(a.j,t)),console.log("vue deviceId "+t),l()({method:"post",url:a.B,data:s()({mobile:this.mobile,code:this.code,clientId:t}),headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){if(console.log("login code "+t.data.code+" message "+t.data.message),0==t.data.code){var n=t.data.result.userId,i=t.data.result.token;console.log("userId "+n+" token "+i),e.$store.state.userId=n,e.$store.state.token=i,localStorage.setItem(a.g,n),localStorage.setItem(a.h,i),e.$router.push({path:"/conversation"})}}).catch(function(e){console.log(e)})},loginEnter:function(e){13===e.keyCode&&""!=this.mobile&&""!=this.code&&this.login()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n.n(i),a=n(425),o=n.n(a),r=n(25);n(74),n(6);t.default={components:{mycard:o.a},created:function(){this.$store.dispatch("initData")},computed:s()({},n.i(r.a)(["changeFullScreenMode"])),mounted:function(){var e=this;window.onresize=function(){console.log("windown onresize");var t=e.$refs.appRef.offsetHeight;console.log("resize app height "+t),e.$store.state.appHeight=t},this.$store.state.appHeight=this.$refs.appRef.offsetHeight,document.addEventListener("visibilitychange",this.handleVisiable)},destroyed:function(){window.onresize=null,document.removeEventListener("visibilitychange",this.handleVisiable)},methods:{handleVisiable:function(e){console.log("current visibility state "+e.target.visibilityState),this.$store.dispatch("visibilityChange",e.target.visibilityState)}}}},,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),s=n(177),a=n.n(s),o=n(58),r=n(113),c=(n(174),n(175)),l=n.n(c),u=n(176);n.n(u);i.default.config.productionTip=!1,i.default.use(l.a);new i.default({el:"#app",router:o.a,store:r.a,template:"<App/>",components:{App:a.a}})},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e)};a.REASON_Unknown="unknown",a.REASON_Busy="busy",a.REASON_SignalError="signalError",a.REASON_Hangup="hangup",a.REASON_MediaError="mediaError",a.REASON_RemoteHangup="remoteHangup",a.REASON_OpenCameraFailure="openCameraError",a.REASON_Timeout="timeout",a.REASON_AcceptByOtherClient="acceptByOtherClient",a.REASON_AllLeft="allLeft",t.a=a},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=n(72),c=function(){function e(t){s()(this,e),this.startTime=(new Date).getTime(),this.voipClient=t}return o()(e,[{key:"setState",value:function(e){this.callState=e,console.log("set current call state "+this.callState),this.sessionCallback&&this.sessionCallback.didChangeState(this.callState)}},{key:"endCall",value:function(e){this.setState(r.a.STATUS_IDLE),this.voipClient.closeCall(),this.voipClient.currentSession=null,this.sessionCallback&&this.sessionCallback.didCallEndWithReason(e)}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=function(){function e(){s()(this,e)}return o()(e,[{key:"onReceiveCall",value:function(e){}},{key:"shouldStartRing",value:function(e){}},{key:"shouldSopRing",value:function(){}}]),e}();t.a=r},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(31),f=n.n(d),h=n(4),g=n.n(h),v=n(26),p=n(20),m=n(46),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,t),u()(this,(t.__proto__||s()(t)).call(this,p.a.VOIP_CONTENT_TYPE_MODIFY,e,n))}return g()(t,e),c()(t,[{key:"digest",value:function(){return""}},{key:"encode",value:function(){var e=f()(t.prototype.__proto__||s()(t.prototype),"encode",this).call(this);e.content=this.callId;var n;return n=this.audioOnly?"1":"0",e.binaryContent=m.a.utf8_to_b64(n),e}},{key:"decode",value:function(e){f()(t.prototype.__proto__||s()(t.prototype),"decode",this).call(this,e),this.callId=e.content;var n=m.a.b64_to_utf8(e.binaryContent);this.audioOnly="1"===n}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=function(){function e(){s()(this,e)}return o()(e,[{key:"didCallEndWithReason",value:function(e){}},{key:"didChangeState",value:function(e){}},{key:"didChangeMode",value:function(e){}},{key:"didCreateLocalVideoTrack",value:function(e){}},{key:"didReceiveRemoteVideoTrack",value:function(e){}},{key:"didReceiveRemoteAudioTrack",value:function(e){}},{key:"didError",value:function(e){}},{key:"didGetStats",value:function(e){}}]),e}();t.a=r},function(e,t,n){"use strict";var i=n(286),s=n.n(i),a=n(284),o=n.n(a),r=n(21),c=n.n(r),l=n(3),u=n.n(l),d=n(0),f=n.n(d),h=n(1),g=n.n(h),v=n(5),p=n.n(v),m=n(4),y=n.n(m),C=n(128),_=n(73),w=n(269),k=n(75),I=n(124),S=n(127),T=n(125),b=n(249),x=n(126),A=n(137),M=n(72),E=n(248),P=function(e){function t(e){f()(this,t);var n=p()(this,(t.__proto__||u()(t)).call(this));return n.mediaConstraints={audio:!0,video:!0},n.handleNegotiationNeededEvent=function(){n.handleOfferMessage()},n.handleICECandidateEvent=function(e){if(e.candidate){console.log("*** Outgoing ICE candidate: "+e.candidate.candidate);var t=new S.a;t.callId=n.currentSession.callId;var i={type:"candidate",label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate};t.payload=c()(i),n.offerMessage(n.currentSession.clientId,t)}},n.handleICEConnectionStateChangeEvent=function(e){switch(console.log("*** ICE connection state changed to "+n.myPeerConnection.iceConnectionState),n.myPeerConnection.iceConnectionState){case"connected":n.currentSession.setState(M.a.STATUS_CONNECTED);break;case"closed":case"failed":case"disconnected":n.cancelCall()}},n.handleSignalingStateChangeEvent=function(e){switch(console.log("*** WebRTC signaling state changed to: "+n.myPeerConnection.signalingState),n.myPeerConnection.signalingState){case"closed":n.cancelCall()}},n.handleTrackEvent=function(e){console.log("comming stream"),n.currentSession.isAudioOnly?n.currentSessionCallback.didReceiveRemoteAudioTrack(e.streams[0]):n.currentSessionCallback.didReceiveRemoteVideoTrack(e.streams[0])},n.handleICEGatheringStateChangeEvent=function(e){console.log("*** ICE gathering state changed to: "+e)},n.store=e,_.a.addReceiveMessageListener(n),n}return y()(t,e),g()(t,[{key:"setCurrentSessionCallback",value:function(e){this.currentSessionCallback=e}},{key:"setCurrentEngineCallback",value:function(e){this.currentEngineCallback=e}},{key:"startCall",value:function(e,t){this.isInitiator=!1;var n=this.newSession(e,t,e+(new Date).getTime());n.setState(M.a.STATUS_OUTGOING),this.currentSession=n,console.log("create new session "+this.currentSession.clientId+" callId "+this.currentSession.callId);var i=new C.a(n.callId,e,t);this.offerMessage(e,i),this.startPreview()}},{key:"cancelCall",value:function(){var e=new x.a;e.callId=this.currentSession.callId,this.offerMessage(this.currentSession.clientId,e),console.log("send bye message"),this.currentSession.endCall(E.a.REASON_RemoteHangup),this.currentSession=null}},{key:"answerCall",value:function(e){this.isInitiator=!0,console.log("isInitiator "+this.isInitiator),this.currentSession.setState(M.a.STATUS_CONNECTING);var t=new T.a;t.isAudioOnly=e,t.callId=this.currentSession.callId,this.offerMessage(this.currentSession.clientId,t),this.startPreview()}},{key:"newSession",value:function(e,t,n){var i=new b.a(this);return i.clientId=e,i.audioOnly=t,i.callId=n,i.sessionCallback=this.currentSessionCallback,i}},{key:"rejectOtherCall",value:function(e,t){var n=new x.a;n.callId=e,this.log("reject other callId "+e+" clientId "+t),this.offerMessage(t,n)}},{key:"offerMessage",value:function(e,t){this.store.dispatch("sendMessage",new A.a(e,t))}},{key:"offerMessageByType",value:function(e){var t=new S.a;t.callId=this.currentSession.callId;var n={type:e,sdp:this.myPeerConnection.localDescription.sdp};t.payload=c()(n),this.offerMessage(this.currentSession.clientId,t)}},{key:"onReceiveMessage",value:function(e){if((new Date).getTime()-e.timestamp<9e4&&1===e.direction){var t=k.a.getMessageContentClazz(e.content.type);if(t){var n=new t;try{n.decode(e.content)}catch(e){console.log("decode error")}if(this.currentSession&&console.log("current call state "+this.currentSession.callState),n instanceof C.a)console.log("receive call startmessage"),this.currentSession&&this.currentSession.callState!==M.a.STATUS_IDLE?this.rejectOtherCall(n.callId,e.from):(this.currentSession=this.newSession(e.from,n.audioOnly,n.callId),this.currentSession.setState(M.a.STATUS_INCOMING),this.currentEngineCallback.onReceiveCall(this.currentSession));else if(n instanceof I.a||n instanceof T.a)this.isInitiator=!1,this.currentSession&&this.currentSession.callState!=M.a.STATUS_IDLE&&(console.log(" CallAnswerMessageContent callState "+this.currentSession.callState),e.from===this.currentSession.clientId&&n.callId===this.currentSession.callId&&(this.currentSession.callState!=M.a.STATUS_OUTGOING||this.currentSession.callState===M.a.STATUS_OUTGOING&&this.currentSession.setState(M.a.STATUS_CONNECTING)));else if(n instanceof S.a)this.currentSession&&this.currentSession.callState!=M.a.STATUS_IDLE&&(console.log("current state "+this.currentSession.callState+" call signal payload "+n.payload),this.currentSession.callState===M.a.STATUS_CONNECTING||this.currentSession.callState===M.a.STATUS_CONNECTED?e.from===this.currentSession.clientId&&n.callId===this.currentSession.callId&&this.handleSignalMsg(n.payload):this.currentSession.endCall(E.a.REASON_AcceptByOtherClient));else if(n instanceof x.a){if(!this.currentSession||this.currentSession.callState===M.a.STATUS_IDLE||e.from!=this.currentSession.clientId||n.callId!=this.currentSession.callId)return;this.cancelCall()}}}}},{key:"handleSignalMsg",value:function(){function e(e){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(t){var n,i,a,o,r,l,u;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.parse(t),i=n.type,console.log("message type "+i),"candidate"!==i){e.next=17;break}return a={candidate:n.candidate,sdpMLineIndex:n.label,sdpMid:n.id},o=new RTCIceCandidate(a),this.log("*** Adding received ICE candidate: "+c()(o)),e.prev=7,e.next=10,this.myPeerConnection.addIceCandidate(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),this.reportError(e.t0);case 15:e.next=41;break;case 17:if("remove-candidates"!==i){e.next=21;break}this.log("remove candidates "),e.next=41;break;case 21:if(r=new RTCSessionDescription(n),"answer"!==i){e.next=27;break}return e.next=25,this.myPeerConnection.setRemoteDescription(r);case 25:e.next=41;break;case 27:if("offer"!==i){e.next=41;break}return e.next=30,this.myPeerConnection.setRemoteDescription(r);case 30:return e.t1=this.myPeerConnection,e.next=33,this.myPeerConnection.createAnswer();case 33:return e.t2=e.sent,e.next=36,e.t1.setLocalDescription.call(e.t1,e.t2);case 36:l=new S.a,l.callId=this.currentSession.callId,u={type:"answer",sdp:this.myPeerConnection.localDescription.sdp},l.payload=c()(u),this.offerMessage(this.currentSession.clientId,l);case 41:case"end":return e.stop()}},e,this,[[7,12]])}));return e}()},{key:"handleOfferMessage",value:function(){function e(){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("*** Negotiation needed "+this.isInitiator),this.isInitiator){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,console.log("---\x3e Creating offer"),e.next=7,this.myPeerConnection.createOffer();case 7:if(t=e.sent,"stable"==this.myPeerConnection.signalingState){e.next=11;break}return console.log("     -- The connection isn't stable yet; postponing..."),e.abrupt("return");case 11:return console.log("---\x3e Setting local description to the offer"),e.next=14,this.myPeerConnection.setLocalDescription(t);case 14:console.log("---\x3e Sending the offer to the remote peer"),this.offerMessageByType("offer"),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.log("*** The following error occurred while handling the negotiationneeded event:"),this.reportError(e.t0);case 22:case 23:case"end":return e.stop()}},e,this,[[3,18]])}));return e}()},{key:"startPreview",value:function(){function e(){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log("Starting to prepare an invitation"),!this.myPeerConnection){e.next=5;break}alert("You can't start a call because you already have one open!"),e.next=19;break;case 5:return e.prev=5,this.mediaConstraints={audio:!0,video:!this.currentSession.isAudioOnly},e.next=9,navigator.mediaDevices.getUserMedia(this.mediaConstraints);case 9:this.webcamStream=e.sent,this.currentSession.isAudioOnly||this.currentSessionCallback.didCreateLocalVideoTrack(this.webcamStream),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(5),this.handleGetUserMediaError(e.t0),e.abrupt("return");case 17:this.createPeerConnection();try{this.webcamStream.getTracks().forEach(function(e){return t.sender=t.myPeerConnection.addTrack(e,t.webcamStream)})}catch(e){this.handleGetUserMediaError(e)}case 19:case"end":return e.stop()}},e,this,[[5,13]])}));return e}()},{key:"createPeerConnection",value:function(){function e(){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.log("Setting up a connection..."),this.myPeerConnection=new RTCPeerConnection({iceServers:[{urls:"turn:turn.liyufan.win:3478",username:"wfchat",credential:"wfchat"}]}),this.myPeerConnection.onicecandidate=this.handleICECandidateEvent,this.myPeerConnection.oniceconnectionstatechange=this.handleICEConnectionStateChangeEvent,this.myPeerConnection.onicegatheringstatechange=this.handleICEGatheringStateChangeEvent,this.myPeerConnection.onsignalingstatechange=this.handleSignalingStateChangeEvent,this.myPeerConnection.onnegotiationneeded=this.handleNegotiationNeededEvent,this.myPeerConnection.ontrack=this.handleTrackEvent;case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCall",value:function(){if(this.log("Closing the call"),this.myPeerConnection){if(this.log("--\x3e Closing the peer connection"),this.myPeerConnection.ontrack=null,this.myPeerConnection.onnicecandidate=null,this.myPeerConnection.oniceconnectionstatechange=null,this.myPeerConnection.onsignalingstatechange=null,this.myPeerConnection.onicegatheringstatechange=null,this.myPeerConnection.onnotificationneeded=null,this.myPeerConnection.removeTrack(this.sender),this.currentSession.isAudioOnly)this.webcamStream.getTracks.forEach(function(e){e.stop()});else{var e=document.getElementById("wxCallLocalVideo");e.srcObject&&(e.pause(),e.srcObject.getTracks().forEach(function(e){e.stop()}))}this.myPeerConnection.close(),this.myPeerConnection=null,this.webcamStream=null}}},{key:"handleGetUserMediaError",value:function(e){switch(this.log_error(e),e.name){case"NotFoundError":alert("Unable to open your call because no camera and/or microphonewere found.");break;case"SecurityError":case"PermissionDeniedError":break;default:alert("Error opening your camera and/or microphone: "+e.message)}this.cancelCall()}},{key:"reportError",value:function(e){this.log_error("Error "+e.name+": "+e.message)}},{key:"log_error",value:function(e){var t=new Date;console.trace("["+t.toLocaleTimeString()+"] "+e)}},{key:"log",value:function(e){var t=new Date;console.log("["+t.toLocaleTimeString()+"] "+e)}}]),t}(w.a);t.a=P},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(6),g=n(15),v=n(16),p=function(e){function t(e){return o()(this,t),u()(this,(t.__proto__||s()(t)).call(this,e))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==h.A}},{key:"processMessage",value:function(e){console.log("ConnectAckHandler process message");var t=JSON.parse(e.content);console.log("connectAcceptedMessage friendHead "+t.friendHead+" messageHead "+t.messageHead),this.vueWebsocket.getFriend();var n=v.a.getLastMessageSeq();n?this.vueWebsocket.sendAction("changetFirstLogin",!1):(n="0",this.vueWebsocket.sendAction("changetFirstLogin",!0)),this.vueWebsocket.pullMessage(n,0,0,v.a.getSendMessageCount()),v.a.setLastMessageSeq(t.messageHead)}}]),t}(g.a);t.a=p},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(42),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.x&&e.subSignal==g.n}},{key:"processMessage",value:function(e){var t=JSON.parse(e.content);v.a.log("friend add request result "+t)}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(43),s=n.n(i),a=n(3),o=n.n(a),r=n(0),c=n.n(r),l=n(1),u=n.n(l),d=n(5),f=n.n(d),h=n(4),g=n.n(h),v=n(15),p=n(6),m=n(16),y=function(e){function t(){return c()(this,t),f()(this,(t.__proto__||o()(t)).apply(this,arguments))}return g()(t,e),u()(t,[{key:"match",value:function(e){return e.signal==p.x&&e.subSignal==p.o}},{key:"processMessage",value:function(e){if(null!=e.content&&""!=e.content){var t=JSON.parse(e.content),n=[],i=!0,a=!1,o=void 0;try{for(var r,c=s()(t);!(i=(r=c.next()).done);i=!0){var l=r.value;l.from!=m.a.getUserId()&&n.push(l)}}catch(e){a=!0,o=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}this.vueWebsocket.sendAction("updateFriendRequest",n)}}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(43),s=n.n(i),a=n(3),o=n.n(a),r=n(0),c=n.n(r),l=n(1),u=n.n(l),d=n(5),f=n.n(d),h=n(4),g=n.n(h),v=n(15),p=n(6),m=n(275),y=function(e){function t(){return c()(this,t),f()(this,(t.__proto__||o()(t)).apply(this,arguments))}return g()(t,e),u()(t,[{key:"match",value:function(e){return e.signal==p.x&&e.subSignal==p.r}},{key:"processMessage",value:function(e){if(null!=e.content){var t=JSON.parse(e.content),n=[],i=!0,a=!1,o=void 0;try{for(var r,c=s()(t);!(i=(r=c.next()).done);i=!0){var l=r.value;n.push(m.a.convert2GroupInfo(l))}}catch(e){a=!0,o=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}this.vueWebsocket.sendAction("updateConversationIntro",n)}}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(16),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.x&&e.subSignal==g.t}},{key:"processMessage",value:function(e){if(e.content){var t=JSON.parse(e.content),n=t.domain,i=t.token;console.log("domain "+n+" token "+i),v.a.setUploadToken(n,i)}}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(16),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.x&&e.subSignal==g.l}},{key:"processMessage",value:function(e){var t=JSON.parse(e.content),n=[];for(var i in t)n[i]=t[i].friendUid;this.vueWebsocket.sendAction("updateFriendIds",n),n.push(v.a.getUserId()),this.vueWebsocket.getUserInfos(n)}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(141),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.x&&e.subSignal==g.q}},{key:"processMessage",value:function(e){if(null!=e.content){var t=JSON.parse(e.content),n=[],i=[];for(var s in t){var a=""===t[s].displayName?t[s].mobile:t[s].displayName;n.push({id:parseInt(s)+1,wxid:t[s].uid,initial:t[s].uid.substring(0,1),img:t[s].portrait,signature:"",nickname:a,sex:0,remark:a,area:t[s].address}),i.push(v.a.convert2UserInfo(t[s]))}console.log("state user size "+n.length),this.vueWebsocket.sendAction("updateUserInfos",i),this.vueWebsocket.sendAction("updateFriendList",n)}}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(42),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.x&&e.subSignal==g.p}},{key:"processMessage",value:function(e){if(e.content&&""!=e.content){var t=JSON.parse(e.content);v.a.log("handle friend request "+t)}}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=function(){function e(){s()(this,e)}return o()(e,[{key:"match",value:function(e){return!1}},{key:"processMessage",value:function(e){}}]),e}();t.a=r},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(42),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.u&&e.subSignal==g.w}},{key:"processMessage",value:function(e){if(e.content&&""!=e.content){var t=JSON.parse(e.content);v.a.log("friend head "+t.head),this.vueWebsocket.getFriend()}}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(42),p=n(16),m=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.u&&e.subSignal==g.y}},{key:"processMessage",value:function(e){if(null!=e.content){var t=JSON.parse(e.content);v.a.log("friend request version "+t.version),p.a.setFriendRequestVersion(t.version),this.vueWebsocket.getFriendRequest(t.version)}}}]),t}(h.a);t.a=m},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(16),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.u&&e.subSignal==g.z}},{key:"processMessage",value:function(e){console.log("notifymessage "+e.content);var t=JSON.parse(e.content);console.log("notify messageHead "+t.messageHead+" notify type "+t.type),v.a.resetSendMessageCount(),v.a.setLastMessageSeq(t.messageHead),this.vueWebsocket.pullMessage(t.messageHead,t.type,1)}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(43),s=n.n(i),a=n(3),o=n.n(a),r=n(0),c=n.n(r),l=n(1),u=n.n(l),d=n(5),f=n.n(d),h=n(4),g=n.n(h),v=n(15),p=n(6),m=(n(130),n(135)),y=(n(139),n(16)),C=(n(76),n(75)),_=(n(134),n(73)),w=function(e){function t(){var e,n,i,s;c()(this,t);for(var a=arguments.length,r=Array(a),l=0;l<a;l++)r[l]=arguments[l];return n=i=f()(this,(e=t.__proto__||o()(t)).call.apply(e,[this].concat(r))),i.conversations=[],s=n,f()(i,s)}return g()(t,e),u()(t,[{key:"match",value:function(e){return e.signal==p.x&&e.subSignal==p.s}},{key:"processMessage",value:function(e){y.a.resetSendMessageCount();var t=JSON.parse(e.content);console.log("current "+t.current+" head "+t.head+" messageCount "+t.messageCount);var n=!0,i=!1,a=void 0;try{for(var o,r=s()(t.messageResponseList);!(n=(o=r.next()).done);n=!0){var c=o.value,c=m.a.toProtoMessage(c);C.a.isDisplayableMessage(c)&&this.addProtoMessage(c),_.a.onReceiveMessage(c)}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}this.vueWebsocket.sendAction("changetFirstLogin",!1)}},{key:"addProtoMessage",value:function(e){this.vueWebsocket.sendAction("addProtoMessage",e)}}]),t}(v.a);t.a=w},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=(n(42),n(141),function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.x&&e.subSignal==g.m}},{key:"processMessage",value:function(e){var t=JSON.parse(e.content);this.vueWebsocket.sendAction("updateSearchUser",t)}}]),t}(h.a));t.a=v},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(15),g=n(6),v=n(16),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==g.x&&e.subSignal==g.v}},{key:"processMessage",value:function(e){var t=JSON.parse(e.content);console.log("SendMessageHandler messageId "+t.messageId+" timestamp "+t.timestamp),v.a.updateSendMessageCount()}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=function(){function e(){s()(this,e)}return o()(e,[{key:"onReceiveMessage",value:function(e){}}]),e}();t.a=r},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(31),f=n.n(d),h=n(4),g=n.n(h),v=n(26),p=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments[2],a=arguments[3];o()(this,t);var r=u()(this,(t.__proto__||s()(t)).call(this,e));return r.remotePath="",r.localPath="",r.mediaType=0,r.mediaType=n,"string"==typeof i?(r.localPath=i,r.remotePath=a):(r.file=i,i&&void 0!==i.path&&(r.localPath=i.path,r.localPath.indexOf(i.name)<0&&(r.localPath+=i.name))),r}return g()(t,e),c()(t,[{key:"encode",value:function(){var e=f()(t.prototype.__proto__||s()(t.prototype),"encode",this).call(this);return e.localMediaPath=this.localPath,e.remoteMediaUrl=this.remotePath,e.mediaType=this.mediaType,e.searchableContent=this.digest(),e}},{key:"decode",value:function(e){f()(t.prototype.__proto__||s()(t.prototype),"decode",this).call(this,e),this.localPath=e.localMediaPath,this.remotePath=e.remoteMediaUrl,this.mediaType=e.mediaType}}]),t}(v.a);t.a=p},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(26),g=n(20),v=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||s()(t)).call(this,g.a.Unknown));return n.originalPayload=e,n}return f()(t,e),c()(t,[{key:"encode",value:function(){return this.originalPayload}},{key:"decode",value:function(e){this.originalPayload=e}},{key:"digest",value:function(){return"未知类型消息"}}]),t}(h.a);t.a=v},function(e,t,n){"use strict";var i=n(3),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=n(5),u=n.n(l),d=n(4),f=n.n(d),h=n(26),g=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),c()(t,[{key:"digest",value:function(){return"尚不支持该类型消息, 请手机查看 : "+this.type}}]),t}(h.a);t.a=g},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(21),s=n.n(i),a=n(0),o=n.n(a),r=n(1),c=n.n(r),l=function(){function e(){o()(this,e),console.log("constuctor")}return c()(e,[{key:"setMessageId",value:function(e){this.messageId=e}},{key:"setSignal",value:function(e){this.signal=e}},{key:"setSubSignal",value:function(e){this.subsignal=e}},{key:"setContent",value:function(e){this.content=e}},{key:"toJson",value:function(){var e={signal:this.signal,subsignal:null==this.subsignal?"NONE":this.subsignal,message_id:null==this.messageId?0:this.messageId,content:this.content};return s()(e)}}]),e}()},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=n(59),c=function(){function e(t,n,i){s()(this,e),this.type=r.a.Single,this.conversationType=this.type,this.target="",this.line=0,this.type=t,this.conversationType=t,this.target=n,this.line=i}return o()(e,[{key:"equal",value:function(e){return this.type===e.type&&this.target===e.target&&this.line===e.line}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=n(1),o=n.n(a),r=n(276),c=function(){function e(){s()(this,e),this.target="",this.name="",this.portrait="",this.owner="",this.type=r.a.Normal,this.memberCount=0,this.extra="",this.updateDt=0}return o()(e,null,[{key:"convert2GroupInfo",value:function(t){var n=new e;return n.target=t.target,n.name=t.name,n.portrait=t.portrait,n.owner=t.owner,n.type=t.type,n.memberCount=t.memberCount,n.extra=t.extra,n.updateDt=t.updateDt,n}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e)};a.Normal=0,a.Free=1,a.Restricted=2,t.a=a},function(e,t,n){"use strict";var i=n(0),s=n.n(i),a=function e(){s()(this,e),this.conversationInfo={}};t.a=a},function(e,t,n){"use strict";function i(e){var t=u.a.AES.decrypt(e,d,{iv:d,mode:u.a.mode.CBC,padding:u.a.pad.Pkcs7});return u.a.enc.Hex.parse(t.toString().slice(8)).toString(u.a.enc.Utf8)}function s(e,t){console.log("code "+e+" key "+t);for(var n=new Array(16),i=0;i<16;i++)n[i]=255&t.charCodeAt(i);var s=String.fromCharCode.apply(String,n),o=u.a.enc.Utf8.parse(s);console.log("keycode "+s);var r=a(e);return console.log("timeEncryptCode "+r),u.a.AES.encrypt(u.a.enc.Base64.parse(r),o,{iv:o,mode:u.a.mode.CBC,padding:u.a.pad.Pkcs7}).ciphertext.toString(u.a.enc.Base64)}function a(e){var t=u.a.enc.Base64.parse(e);t=o(t.words);for(var n=[],i=((new Date).getMilliseconds()/1e3-1514736e3)/3600,s=0;s<t.length+4;s++)s<4?0==s?n.push(255&i):1==s?n.push((65280&i)>>8):2==s?n.push((16711680&i)>>16):3==s&&n.push((255&i)>>24):n.push(t[s-4]);console.log("convertTimeEncryptCode result "+n);var a=btoa(String.fromCharCode.apply(String,c()(new Uint8Array(n))));return console.log("hash word "+a),a}function o(e){var t,n,i,s=[];for(n=0;n<e.length;++n)for(t=e[n],i=3;i>=0;--i)s.push(t>>8*i&255);return s}t.a=i,t.b=s;var r=n(285),c=n.n(r),l=n(160),u=n.n(l),d=u.a.enc.Base64.parse("ABEiM0RVZnd4eXp7fH1+fw==")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,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"},,,,function(e,t,n){var i=n(13)(n(218),n(434),null,null);e.exports=i.exports},function(e,t,n){n(391);var i=n(13)(n(220),n(435),"data-v-0d7b1a33",null);e.exports=i.exports},function(e,t,n){n(401);var i=n(13)(n(221),n(445),"data-v-da467b9a",null);e.exports=i.exports},function(e,t,n){n(395);var i=n(13)(n(222),n(439),"data-v-33585db3",null);e.exports=i.exports},function(e,t,n){n(389);var i=n(13)(n(223),n(432),"data-v-0799bace",null);e.exports=i.exports},function(e,t,n){n(396);var i=n(13)(n(224),n(440),"data-v-44e23d43",null);e.exports=i.exports},function(e,t,n){n(399);var i=n(13)(n(225),n(443),"data-v-8859209a",null);e.exports=i.exports},function(e,t,n){n(392);var i=n(13)(n(227),n(436),"data-v-24d12513",null);e.exports=i.exports},function(e,t,n){n(398);var i=n(13)(n(228),n(442),"data-v-69091f6c",null);e.exports=i.exports},function(e,t,n){n(397);var i=n(13)(n(229),n(441),"data-v-5d7d306c",null);e.exports=i.exports},function(e,t,n){n(390);var i=n(13)(n(230),n(433),"data-v-0ab4b8d8",null);e.exports=i.exports},function(e,t,n){n(400);var i=n(13)(n(231),n(444),"data-v-c6bcac80",null);e.exports=i.exports},function(e,t,n){n(402);var i=n(13)(n(232),n(446),"data-v-f15027e8",null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"add-content"},[n("div",[n("a",{staticClass:"iconsize wx-chat-icon",on:{click:e.showSearchFriendDialog}},[n("i",{staticClass:"iconfont icon-jiahaoyou iconhover"}),e._v(" 添加好友 ")])]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"iconsize wx-chat-icon"},[n("i",{staticClass:"iconfont icon-pengyou iconhover"}),e._v(" 创建群聊 ")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"addfrind"},[n("el-dialog",{attrs:{title:"添加好友",visible:e.showSearchFriendDialog,width:"30%","show-close":!0,center:""},on:{"update:visible":function(t){e.showSearchFriendDialog=t},close:e.handleClose}},[n("el-dialog",{attrs:{width:"30%",title:"添加好友",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[n("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.friendRequest,callback:function(t){e.friendRequest=t},expression:"friendRequest"}}),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"medium",type:"info",plain:"",round:""},on:{click:function(t){e.innerVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{size:"medium",type:"success",plain:"",round:""},on:{click:e.sendFriendRequest}},[e._v("确 定")])],1)],1),e._v(" "),n("el-input",{attrs:{"prefix-icon":"el-icon-search",placeholder:"请输入手机号码或昵称"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchUser(t)}},model:{value:e.friendInput,callback:function(t){e.friendInput=t},expression:"friendInput"}}),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.searchUsers,"show-header":!1,fit:!0,"highlight-current-row":!1,"max-height":"300"}},[n("el-table-column",{attrs:{prop:"image",label:"头像",width:"50"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-avatar",{attrs:{src:e.row.portrait}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("p",[e._v(e._s(t.row.displayName))]),e._v(" "),n("p",[e._v(e._s(t.row.mobile))])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"加好友",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"icon iconfont icon-jiahaoyou",on:{click:function(n){return e.showFriendRequestDialog(t.row)}}})]}}])})],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{style:e.rootStyle,attrs:{id:e.config.id}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conversationlist",style:{height:e.appHeight-60+"px"}},[n("ul",e._l(e.searchedConversationList,function(t,i){return n("li",{key:i,staticClass:"sessionlist",class:{active:t.conversationInfo.target===e.selectTarget},on:{click:function(n){return e.selectConversation(t.conversationInfo.target)}}},[n("div",{staticClass:"list-left"},[n("img",{staticClass:"avatar",attrs:{width:"42",height:"42",alt:"static/images/vue.jpg",src:t.img,onerror:"this.src='static/images/vue.jpg'"}})]),e._v(" "),n("div",{staticClass:"list-right"},[n("div",{staticClass:"title-info"},[n("p",{staticClass:"name"},[e._v(e._s(t.name?t.name:""))]),e._v(" "),n("span",{staticClass:"time"},[e._v(e._s(e._f("getTimeStringAutoShort2")(t.conversationInfo.timestamp)))])]),e._v(" "),n("div",{staticClass:"lastmsg-info"},[n("p",{staticClass:"lastmsg"},[e._v(e._s(e.processageGroupMessage(t)))]),e._v(" "),t.conversationInfo.unreadCount&&t.conversationInfo.unreadCount.unread>0?n("span",{staticClass:"unread-num"},[n("span",{staticClass:"unread-num-show"},[e._v(e._s(t.conversationInfo.unreadCount?t.conversationInfo.unreadCount.unread:0))])]):e._e()])])])}),0)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text"},[n("div",{staticClass:"emoji"},[n("i",{staticClass:"icon iconfont icon-biaoqing",on:{click:function(t){e.showEmoji=!e.showEmoji}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.isSingleConversation,expression:"isSingleConversation"}],staticClass:"icon iconfont icon-dianhua",attrs:{title:"语音聊天"},on:{click:e.sendAudio}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.isSingleConversation,expression:"isSingleConversation"}],staticClass:"icon iconfont icon-ai-video",attrs:{title:"视频聊天"},on:{click:e.sendVideo}}),e._v(" "),n("i",{staticClass:"icon iconfont icon-tupian",attrs:{title:"发送图片"}},[n("input",{ref:"uploadPic",attrs:{type:"file",accept:"image/*",id:"chat-send-img"},on:{change:e.sendPic}})]),e._v(" "),e._m(0),e._v(" "),n("transition",{attrs:{name:"showbox"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showEmoji,expression:"showEmoji"}],staticClass:"emojiBox"},e._l(e.emojis,function(t,i){return n("li",{key:i},[n("img",{attrs:{src:"static/emoji/"+t.file,data:t.code},on:{click:function(n){e.content+=t.code}}})])}),0)]),e._v(" "),n("transition",{attrs:{name:"voice-video-chat-box"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"chat-modal"},[n("div",{staticClass:"chat-box"},[n("video",{attrs:{id:"video-remote",playsinline:"",autoplay:"",muted:""},domProps:{muted:!0}}),e._v(" "),n("video",{attrs:{id:"video-local",playsinline:"",autoplay:"",muted:""},domProps:{muted:!0}})])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showChatBox,expression:"showChatBox"}],staticClass:"callContent"},[n("div",{},[n("div",{staticClass:"callercontent callshow"},[n("div",{staticClass:"exchange-content"},[n("div",{staticClass:"playcontent left-big-content"},[n("img",{directives:[{name:"show",rawName:"v-show",value:e.showCallRemoteImg,expression:"showCallRemoteImg"}],staticClass:"bigavatar",attrs:{id:"wxCallRemoteImg",src:e.callRemoteImg}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.showCallTips,expression:"showCallTips"}],staticClass:"calltips",attrs:{id:"wxCallTips"},domProps:{textContent:e._s(e.videoTextCallTips)}},[e._v(" 接通中... ")]),e._v(" "),n("video",{directives:[{name:"show",rawName:"v-show",value:e.showCallRemoteVideo,expression:"showCallRemoteVideo"}],staticStyle:{display:"none"},attrs:{id:"wxCallRemoteVideo",autoplay:"autoplay",playsinline:""}})]),e._v(" "),n("div",{staticClass:"playcontent right-sml-content"},[n("img",{directives:[{name:"show",rawName:"v-show",value:e.showCallLocalImg,expression:"showCallLocalImg"}],staticClass:"bigavatar",attrs:{id:"wxCallLocalImg",src:e.callLocalImg}}),e._v(" "),n("video",{directives:[{name:"show",rawName:"v-show",value:e.showCallLocalVideo,expression:"showCallLocalVideo"}],staticStyle:{display:"none"},attrs:{id:"wxCallLocalVideo",autoplay:"autoplay",muted:"muted",playsinline:""},domProps:{muted:!0}})])]),e._v(" "),n("div",{staticClass:"opera-content flexbox"},[n("img",{staticClass:"calleravatar",attrs:{src:e.callRemoteImg}}),e._v(" "),n("span",{staticClass:"flexauto overell callnick",domProps:{textContent:e._s(e.callDisplayName)}}),e._v(" "),n("span",{staticClass:"flexbox"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.cancelCall,expression:"cancelCall"}],staticClass:"operabtn canclecall btnopacity",on:{click:e.cancel}},[e._v("取消")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.rejectCall,expression:"rejectCall"}],staticClass:"operabtn canclecall btnopacity",staticStyle:{display:"none"},on:{click:e.reject}},[e._v("拒绝")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.acceptCall,expression:"acceptCall"}],staticClass:"operabtn upcall btnopacity",staticStyle:{display:"none"},on:{click:e.accept}},[e._v("接听")])]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.showTalkTime,expression:"showTalkTime"}],staticClass:"talktime flexbox",staticStyle:{display:"none"}},[n("i",{staticClass:"iconfont icon-ai-video"}),e._v(" "),n("span",{domProps:{textContent:e._s(e.talkTime)}},[e._v("00:00")])]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.hangUpCall,expression:"hangUpCall"}],staticClass:"operabtn canclecall btnopacity",staticStyle:{display:"none"},on:{click:e.hangUp}},[n("i",{staticClass:"iconfont icon-guaduan"}),e._v("挂断 ")]),e._v(" "),e._m(1),e._v(" "),e._m(2)])])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showAudioBox,expression:"showAudioBox"}],staticClass:"audioContent"},[n("div",{staticClass:"audioBody callshow"},[n("div",{staticClass:"audioBg"},[n("img",{staticClass:"callavatar",attrs:{src:e.callRemoteImg}}),e._v(" "),n("div",{staticClass:"blackbg"})]),e._v(" "),n("div",{staticClass:"audiomain"},[n("img",{staticClass:"audio-avatar",attrs:{src:e.callRemoteImg}}),e._v(" "),n("p",{staticClass:"callnick",domProps:{textContent:e._s(e.callDisplayName)}}),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.showTalkTime,expression:"showTalkTime"}],staticClass:"call-time",staticStyle:{display:"none"},domProps:{textContent:e._s(e.talkTime)}},[e._v("00:00")]),e._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:e.waitingMsg,expression:"waitingMsg"}],staticClass:"waiting-msg",domProps:{textContent:e._s(e.waitingMsgTips)}},[e._v(" 接通中... ")]),e._v(" "),n("div",{staticClass:"call-opera flexbox"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.hangUpCall,expression:"hangUpCall"}],staticClass:"cancleaudio btnopacity",staticStyle:{display:"none"},on:{click:e.hangUp}},[n("i",{staticClass:"iconfont icon-guaduan"}),e._v("挂断 ")]),e._v(" "),n("div",{staticClass:"loadingcall flexbox"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.cancelCall,expression:"cancelCall"}],staticClass:"cancleaudio callercanle btnopacity",staticStyle:{display:"none"},on:{click:e.cancel}},[n("i",{staticClass:"iconfont icon-guaduan"}),e._v("取消 ")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.rejectCall,expression:"rejectCall"}],staticClass:"cancleaudio btnopacity",staticStyle:{display:"none"},on:{click:e.reject}},[e._v("拒绝")]),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.acceptCall,expression:"acceptCall"}],staticClass:"upcall btnopacity",staticStyle:{display:"none"},on:{click:e.accept}},[e._v("接听")])])])]),e._v(" "),e._m(3),e._v(" "),e._m(4)])])],1),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],ref:"text",attrs:{id:"sendText"},domProps:{value:e.content},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.sendMessage(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.ctrlKey?e.newline(t):null}],focus:e.onFocus,click:function(t){e.showEmoji=!1},input:function(t){t.target.composing||(e.content=t.target.value)}}}),e._v(" "),n("div",{ref:"sendBtn",staticClass:"send",class:{disable:e.sendBtnDisabled},on:{click:e.send}},[n("span",[e._v("发送")])]),e._v(" "),n("transition",{attrs:{name:"appear"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.warn,expression:"warn"}],staticClass:"warn"},[n("div",{staticClass:"description"},[e._v("不能发送空白信息")])])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("i",{staticClass:"icon iconfont icon-wenjian",attrs:{title:"发送文件"}},[n("input",{attrs:{type:"file",accept:"*",id:"chat-send-file"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"screenbtn"},[n("i",{staticClass:"iconfont icon-quanping iconfull",staticStyle:{display:"none"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"screenbtn",staticStyle:{display:"none"}},[n("i",{staticClass:"iconfont icon-tuichuquanping iconfull"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"none"}},[n("audio",{attrs:{id:"wxCallRemoteAudio",autoplay:"autoplay"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"none"}},[n("audio",{attrs:{id:"wxCallLocalAudio",autoplay:"autoplay",muted:"muted"}})])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout-container",attrs:{id:"app-chat"}},[n("router-view"),e._v(" "),n("searchfriend")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"padding-wrapper"},[n("div",{staticClass:"search-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"searchInput",attrs:{type:"text",placeholder:"搜索"},domProps:{value:e.search},on:{keyup:e.change,input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.noText,expression:"noText"}],staticClass:"icon iconfont icon-sousuo"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.haveText,expression:"haveText"}],staticClass:"searchInput-delete",on:{click:e.del}})])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Info-wrapper"},[n("div",{staticClass:"newfriend"},[n("div",{staticClass:"nickname"},[e._v(e._s(e.selectedFriend.nickname))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.selectedFriend.id,expression:"selectedFriend.id === 0"}],staticClass:"friendrequest",style:{height:e.appHeight-60+"px"}},[n("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:e.friendRequests,"show-header":!1,"max-height":e.appHeight-61}},[n("el-table-column",{attrs:{prop:"image",label:"头像",width:"50"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("el-avatar",{attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("p",[e._v(e._s(t.row.from))]),e._v(" "),n("p",[e._v(e._s(t.row.reason))])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"加好友",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"success",disabled:1===t.row.status},on:{click:function(n){return e.handleFriendRequest(t.row)}}},[e._v(e._s(e.requestBtnMessage(t.row)))])]}}])})],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedFriend.id>0,expression:"selectedFriend.id > 0"}],staticClass:"friendInfo"},[n("div",{staticClass:"esInfo"},[n("div",{staticClass:"left"},[n("div",{staticClass:"people"},[n("div",{staticClass:"nickname"},[e._v(e._s(e.selectedFriend.nickname))]),e._v(" "),n("div",{class:[1===e.selectedFriend.sex?"gender-male":"gender-female"]})]),e._v(" "),n("div",{staticClass:"signature"},[e._v(e._s(e.selectedFriend.signature))])]),e._v(" "),n("div",{staticClass:"right"},[n("img",{staticClass:"avatar",attrs:{width:"60",height:"60",src:e.selectedFriend.img}})])]),e._v(" "),n("div",{staticClass:"detInfo"},[n("div",{staticClass:"remark"},[n("span",[e._v("备   注")]),e._v(e._s(e.selectedFriend.remark))]),e._v(" "),n("div",{staticClass:"area"},[n("span",[e._v("地   区")]),e._v(e._s(e.selectedFriend.area))]),e._v(" "),n("div",{staticClass:"wxid"},[n("span",[e._v("微信号")]),e._v(e._s(e.selectedFriend.wxid))])]),e._v(" "),n("div",{staticClass:"send",on:{click:e.send}},[n("span",[e._v("发消息")])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message"},[n("header",{staticClass:"header"},[n("div",{staticClass:"friendname"},[e._v(e._s(e.selectedChat.name))])]),e._v(" "),n("div",{ref:"list",staticClass:"message-wrapper",style:{height:.75*e.appHeight-60+"px"},on:{scroll:e.scrollEvent,click:e.messageBoxClick}},[e.selectedChat?n("ul",e._l(e.selectedChat.protoMessages,function(t,i){return n("li",{key:i,staticClass:"message-item"},[e.isShowTime(i,e.selectedChat.protoMessages)?n("div",{staticClass:"time"},[n("span",[e._v(e._s(e._f("getTimeStringAutoShort2")(t.timestamp)))])]):e._e(),e._v(" "),104===t.content.type?n("div",{staticClass:"time"},[n("span",[e._v(e._s(e.notification(t.content.binaryContent,t.content.type)))])]):e._e(),e._v(" "),110===t.content.type?n("div",{staticClass:"time"},[n("span",[e._v(e._s(e.notification(t.content.binaryContent,t.content.type)))])]):e._e(),e._v(" "),90===t.content.type?n("div",{staticClass:"time"},[n("span",[e._v(e._s(t.content.content))])]):e._e(),e._v(" "),e.isNotification(t.content.type)?e._e():n("div",{staticClass:"main",class:{self:0==t.direction}},[n("img",{staticClass:"avatar",attrs:{width:"36",height:"36",src:0==t.direction?e.user.img:null!=e.userInfos.get(t.from)?e.userInfos.get(t.from).portrait:"static/images/vue.jpg",onerror:"this.src='static/images/vue.jpg'"}}),e._v(" "),n("div",{staticClass:"content"},[1===t.content.type&&e.isfaceMessage(t.content.searchableContent)?n("div",{staticClass:"text",domProps:{innerHTML:e._s(e.replaceFace(t.content.searchableContent))}}):e._e(),e._v(" "),1!==t.content.type||e.isfaceMessage(t.content.searchableContent)?e._e():n("div",{staticClass:"text",domProps:{textContent:e._s(t.content.searchableContent)}}),e._v(" "),2===t.content.type?n("div",[e._v("\n                                [语音消息]\n                            ")]):e._e(),e._v(" "),3===t.content.type?n("div",{directives:[{name:"viewer",rawName:"v-viewer"}]},[n("img",{staticClass:"receive-image",attrs:{src:t.content.remoteMediaUrl}})]):e._e(),e._v(" "),4===t.content.type?n("div",[e._v("\n                                [位置消息]\n                            ")]):e._e(),e._v(" "),5===t.content.type?n("div",[e._v("\n                                [文件消息]\n                            ")]):e._e(),e._v(" "),6===t.content.type?n("div",[n("Xgplayer",{attrs:{config:e.videoConfig(t.content.remoteMediaUrl,i===e.selectedChat.protoMessages.length-1)},on:{player:function(t){e.Player=t}}})],1):e._e(),e._v(" "),7===t.content.type?n("div",[e._v("\n                                [表情消息]\n                            ")]):e._e(),e._v(" "),8===t.content.type?n("div",[e._v("\n                                [图片表情]\n                            ")]):e._e(),e._v(" "),400===t.content.type?n("div",[e._v("\n                                [网络电话]\n                            ")]):e._e()])])])}),0):e._e()])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"friend-wrapper"},[n("search"),e._v(" "),n("friendlist")],1),e._v(" "),n("div",{staticClass:"friendinfo"},[n("info")],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"msglist"},[n("search"),e._v(" "),n("chatlist")],1),e._v(" "),n("div",{staticClass:"chatbox"},[n("message"),e._v(" "),n("v-text")],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"mycardRef",staticClass:"mycard"},[n("header",[n("img",{staticClass:"avatar",attrs:{src:e.user.img},on:{click:e.changeFullScreenMode}})]),e._v(" "),n("div",{staticClass:"navbar",on:{click:e.clearSearch}},[n("div",{staticClass:"conversation-item"},[e.unreadTotalCount>0?n("span",{staticClass:"unread-num"},[n("span",{staticClass:"unread-num-show"},[e._v(e._s(e.unreadTotalCount))])]):e._e(),e._v(" "),n("router-link",{staticClass:"icon iconfont icon-dkw_xiaoxi",attrs:{to:"/conversation"}})],1),e._v(" "),n("div",{staticClass:"friend-item"},[e.newFriendRequestCount>0?n("span",{staticClass:"unread-friend-request-num"}):e._e(),e._v(" "),n("router-link",{staticClass:"icon iconfont icon-pengyou",attrs:{to:"/friend"}})],1),e._v(" "),n("div",{staticClass:"icon iconfont icon-jiahaoyou",on:{click:function(t){e.showAddRequestTip=!e.showAddRequestTip}}},[n("addtip",{directives:[{name:"show",rawName:"v-show",value:e.showAddRequestTip,expression:"showAddRequestTip"}]})],1)]),e._v(" "),n("footer",[n("i",{staticClass:"icon iconfont icon-tuichu",attrs:{title:"退出"},on:{click:e.loginOut}})])])},staticRenderFns:[]}},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_box"},[n("router-link",{attrs:{to:"#"}},[n("div",{staticClass:"login_close"})]),e._v(" "),n("div",{staticClass:"login_panel"},[e._m(0),e._v(" "),n("label",{staticStyle:{"margin-top":"50px"}},[e._v("手机号码：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],attrs:{type:"tel",pattern:"^\\d{11}$",title:"请输入账号"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}}),e._v(" "),n("label",[e._v("验证码：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"num",title:"请输入密码"},domProps:{value:e.code},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginEnter(t)},input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),n("input",{staticClass:"bt",attrs:{type:"submit",value:"登录"},on:{click:e.login}})])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login_title"},[i("img",{attrs:{src:n(415),alt:""}}),e._v(" "),i("p",[e._v("输入账号进行安全登录")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friendlist",style:{height:e.appHeight-60+"px"}},[n("ul",e._l(e.searchedFriendlist,function(t,i){return n("li",{key:i,staticClass:"frienditem",class:{noborder:!t.initial}},[t.initial?n("div",{staticClass:"list_title"},[e._v(e._s(t.initial))]):e._e(),e._v(" "),n("div",{staticClass:"friend-info",class:{active:t.id===e.selectFriendId},on:{click:function(n){return e.selectFriend(t.id)}}},[n("div",{staticClass:"friend-item"},[e.newFriendRequestCount>0&&0===t.id?n("span",{staticClass:"unread-friend-request-num"},[n("span",{staticClass:"unread-num-show"},[e._v(e._s(e.newFriendRequestCount))])]):e._e(),e._v(" "),n("img",{staticClass:"avatar",attrs:{width:"36",height:"36",src:t.img,onerror:"this.src='static/images/vue.jpg'"}})]),e._v(" "),n("div",{staticClass:"remark"},[e._v(e._s(t.remark))])])])}),0)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"appRef",class:{fullscreen:e.changeFullScreenMode},attrs:{id:"app"}},[n("div",{staticClass:"sidebar"},[n("mycard")],1),e._v(" "),n("div",{staticClass:"main"},[n("router-view")],1)])},staticRenderFns:[]}}],[247]);
//# sourceMappingURL=app.b70093c59559e2454455.js.map
webpackJsonp([1],[,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return r}),n.d(t,"f",function(){return c}),n.d(t,"i",function(){return l}),n.d(t,"k",function(){return u}),n.d(t,"u",function(){return d}),n.d(t,"l",function(){return g}),n.d(t,"s",function(){return f}),n.d(t,"m",function(){return h}),n.d(t,"n",function(){return v}),n.d(t,"o",function(){return p}),n.d(t,"p",function(){return m}),n.d(t,"r",function(){return y}),n.d(t,"t",function(){return C}),n.d(t,"q",function(){return _}),n.d(t,"v",function(){return I}),n.d(t,"j",function(){return w}),n.d(t,"g",function(){return k}),n.d(t,"h",function(){return T});var i="ws",a="120.79.90.245",s=9326,o=25e3,r=3e4,c="blob",l="CONNECT",u="DISCONNECT",d="CONNECT_ACK",g="PUBLISH",f="PUB_ACK",h="FP",v="UPUI",p="GPGI",m="MP",y="MS",C="MN",_="GQNUT",I="http://"+a+":8081/login",w="vue-device-id",k="vue-user-id",T="vue-token"},,,,,,function(e,t,n){"use strict";var i=n(35),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(8),u=function(){function e(){o()(this,e)}return c()(e,null,[{key:"saveConverSations",value:function(e){localStorage.setItem("coversations",a()(e))}},{key:"getConversations",value:function(){var e=localStorage.getItem("coversations");return JSON.parse(e)}},{key:"getLastMessageSeq",value:function(){return localStorage.getItem("last_message_seq")}},{key:"setUploadToken",value:function(e,t){localStorage.setItem(e,t)}},{key:"getImageUploadToken",value:function(){return localStorage.getItem("http://image.comsince.cn/")}},{key:"setLastMessageSeq",value:function(e){localStorage.setItem("last_message_seq",e)}},{key:"saveMessages",value:function(e){localStorage.setItem("messages",a()(e))}},{key:"getMessages",value:function(){var e=localStorage.getItem("messages");return JSON.parse(e)}},{key:"updateSendMessageCount",value:function(){var e=localStorage.getItem("send_message_count");e=e?parseInt(e)+1:1,localStorage.setItem("send_message_count",e)}},{key:"getSendMessageCount",value:function(){var e=localStorage.getItem("send_message_count");return e||(e=0),e}},{key:"resetSendMessageCount",value:function(){localStorage.setItem("send_message_count",0)}},{key:"getUserId",value:function(){return localStorage.getItem(l.g)}},{key:"setSelectTarget",value:function(e){localStorage.setItem("select_target",e)}},{key:"getSelectTarget",value:function(){return localStorage.getItem("select_target")}},{key:"clearLocalStore",value:function(){localStorage.setItem("coversations",""),localStorage.setItem("last_message_seq",""),localStorage.setItem("messages",""),localStorage.setItem("send_message_count",0),localStorage.setItem("select_target",""),localStorage.setItem(l.g,"")}}]),e}();t.a=u},,,,,,,function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(170),h=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||a()(t)).call(this));return n.vueWebsocket=e,n}return g()(t,e),c()(t,[{key:"vueWebsocketClient",get:function(){return this.vueWebsocket}}]),t}(f.a);t.a=h},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=n(98),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];a()(this,e),this.mentionedType=0,this.mentionedTargets=[],this.type=t,this.mentionedType=n,this.mentionedTargets=i}return o()(e,[{key:"digest",value:function(){return"...digest..."}},{key:"encode",value:function(){var e=new r.a;return e.type=this.type,e.mentionedType=this.mentionedType,e.mentionedTargets=this.mentionedTargets,e}},{key:"decode",value:function(e){this.type=e.type,this.mentionedType=e.mentionedType,this.mentionedTargets=e.mentionedTargets}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e)};s.Unknown=0,s.Text=1,s.Voice=2,s.Image=3,s.Location=4,s.File=5,s.Video=6,s.Sticker=7,s.ImageText=8,s.P_Text=9,s.RecallMessage_Notification=80,s.Tip_Notification=90,s.Typing=91,s.CreateGroup_Notification=104,s.AddGroupMember_Notification=105,s.KickOffGroupMember_Notification=106,s.QuitGroup_Notification=107,s.DismissGroup_Notification=108,s.TransferGroupOwner_Notification=109,s.ChangeGroupName_Notification=110,s.ModifyGroupAlias_Notification=111,s.ChangeGroupPortrait_Notification=112,s.MuteGroupMember_Notification=113,s.ChangeJoinType_Notification=114,s.ChangePrivateChat_Notification=115,s.ChangeSearchable_Notificaiton=116,s.SetGroupManager_Notification=117,s.VOIP_CONTENT_TYPE_START=400,s.VOIP_CONTENT_TYPE_END=402,s.VOIP_CONTENT_TYPE_ACCEPT=401,s.VOIP_CONTENT_TYPE_SIGNAL=403,s.VOIP_CONTENT_TYPE_MODIFY=404,s.VOIP_CONTENT_TYPE_ACCEPT_T=405,t.a=s},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(45),a=n(323);i.a.use(a.a);var s=new a.a({routes:[{path:"/login",component:n(308)},{path:"/",component:n(309),redirect:"conversation",children:[{path:"conversation",name:"conversation",component:n(306),hidden:!0},{path:"friend",name:"friend",component:n(307),hidden:!0}]}],linkActiveClass:"active"});t.a=s},,function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e)};s.Single=0,s.Group=1,s.ChatRoom=2,s.Channel=3,t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=function(){function e(){a()(this,e)}return o()(e,null,[{key:"b64_to_utf8",value:function(e){return decodeURIComponent(escape(atob(e)))}},{key:"utf8_to_b64",value:function(e){return btoa(unescape(encodeURIComponent(e)))}}]),e}();t.a=r},,,,,,,,function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=n(8),c=n(185),l=n(179),u=n(165),d=n(168),g=n(169),f=n(172),h=n(171),v=n(166),p=n(173),m=n(167),y=n(14),C=function(){function e(t,n,i,s,o,r,c){a()(this,e),this.handlerList=[],this.userDisconnect=!1,this.ws_protocol=t,this.ip=n,this.port=i,this.heartbeatTimeout=s,this.reconnectInterval=o,this.binaryType=r,this.url=t+"://"+n+":"+i,this.vuexStore=c,this.initHandlerList()}return o()(e,[{key:"connect",value:function(e){this.ws=new WebSocket(this.url),console.log("current url "+this.url+" status "+this.ws.readyState),this.ws.binaryType=this.binaryType;var t=this;this.ws.onopen=function(e){console.log("ws open"),t.lastInteractionTime((new Date).getTime()),t.pingIntervalId=setInterval(function(){t.ping()},t.heartbeatTimeout),t.userDisconnect=!1,t.sendConnectMessage()},this.ws.onmessage=function(e){console.log("ws onmessage["+e.data+"]"),t.processMessage(e.data),t.lastInteractionTime((new Date).getTime())},this.ws.onclose=function(e){console.log("ws onclose"),t.ws.close(),clearInterval(t.pingIntervalId),t.userDisconnect||(console.log("reconnect websocket"),t.reconnect(e))},this.ws.onerror=function(e){console.log("connect error")}}},{key:"reconnect",value:function(e){var t=this;setTimeout(function(){t.connect(!0)},this.reconnectInterval)}},{key:"lastInteractionTime",value:function(e){this.actionTime=e}},{key:"getLastActionTime",value:function(){return this.actionTime}},{key:"ping",value:function(){this.send("心跳内容")}},{key:"send",value:function(e){console.log("send message "+e),this.ws.send(e)}},{key:"sendAction",value:function(e,t){this.vuexStore.dispatch(e,t)}},{key:"initHandlerList",value:function(){this.handlerList.push(new u.a(this)),this.handlerList.push(new d.a(this)),this.handlerList.push(new g.a(this)),this.handlerList.push(new f.a(this)),this.handlerList.push(new h.a(this)),this.handlerList.push(new v.a(this)),this.handlerList.push(new p.a(this)),this.handlerList.push(new m.a(this))}},{key:"processMessage",value:function(e){for(var t=JSON.parse(e),n=0;n<this.handlerList.length;n++)this.handlerList[n].match(t)&&this.handlerList[n].processMessage(t)}},{key:"sendConnectMessage",value:function(){console.log("userToken "+localStorage.getItem("vue-token"));var e=n.i(c.a)(localStorage.getItem("vue-token"));console.log("decryptToken "+e);var t=e.substring(0,e.indexOf("|"));e=e.substring(e.indexOf("|")+1);var i=e.substring(0,e.indexOf("|"));console.log("[pwd]->"+t+" [secret]->"+i);var a=n.i(c.b)(t,i);console.log("encrypt pwd: "+a);var s=new l.a;s.setSignal(r.i);var o={userName:y.a.getUserId(),password:a,clientIdentifier:localStorage.getItem(r.j)};s.content=o,console.log(s.toJson()),this.send(s.toJson())}},{key:"sendDisConnectMessage",value:function(){var e=new l.a;e.setSignal(r.k);var t={clearSession:1};e.content=t,console.log(e.toJson()),this.send(e.toJson()),this.userDisconnect=!0}},{key:"getFriend",value:function(){var e=new l.a;e.setSignal(r.l),e.setSubSignal(r.m),e.setContent({version:0}),this.send(e.toJson())}},{key:"getUserInfos",value:function(e){var t=new l.a;t.setSignal(r.l),t.setSubSignal(r.n),t.setContent(e),this.send(t.toJson())}},{key:"getGroupInfo",value:function(e,t){var n=[];n.push(e),this.sendPublishMessage(r.o,n)}},{key:"pullMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=new l.a;a.setSignal(r.l),a.setSubSignal(r.p),a.setContent({messageId:e,type:t,pullType:n,sendMessageCount:i}),this.send(a.toJson())}},{key:"getUploadToken",value:function(e){var t={mediaType:e};this.sendPublishMessage(r.q,t)}},{key:"sendPublishMessage",value:function(e,t){var n=new l.a;n.setSignal(r.l),n.setSubSignal(e),n.setContent(t),this.send(n.toJson())}},{key:"sendMessage",value:function(e){var t=new l.a;t.setSignal(r.l),t.setSubSignal(r.r),t.setContent(e),this.send(t.toJson())}}]),e}();t.a=C},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e),this.unread=0,this.unreadMention=0,this.unreadMentionAll=0};t.a=s},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(35),a=n.n(i),s=n(34),o=n.n(s),r=n(187),c=n.n(r),l=n(45),u=n(19),d=n(44),g=n(55),f=n(8),h=n(183),v=n(104),p=n(95),m=n(101),y=n(46),C=n(14),_=n(103),I=n(56),w=n(132);l.a.use(u.a);var k=(new Date,{searchText:"",user:{name:"ratel",img:"static/images/UserAvatar.jpg"},friendlist:[{id:0,wxid:"new",initial:"新的朋友",img:"static/images/newfriend.jpg",signature:"",nickname:"新的朋友",sex:0,remark:"新的朋友",area:""}],emojis:[{file:"100.gif",code:"/::)",title:"微笑",reg:/\/::\)/g},{file:"101.gif",code:"/::~",title:"伤心",reg:/\/::~/g},{file:"102.gif",code:"/::B",title:"美女",reg:/\/::B/g},{file:"103.gif",code:"/::|",title:"发呆",reg:/\/::\|/g},{file:"104.gif",code:"/:8-)",title:"墨镜",reg:/\/:8-\)/g},{file:"105.gif",code:"/::<",title:"哭",reg:/\/::</g},{file:"106.gif",code:"/::$",title:"羞",reg:/\/::\$/g},{file:"107.gif",code:"/::X",title:"哑",reg:/\/::X/g},{file:"108.gif",code:"/::Z",title:"睡",reg:/\/::Z/g},{file:"109.gif",code:"/::'(",title:"哭",reg:/\/::'\(/g},{file:"110.gif",code:"/::-|",title:"囧",reg:/\/::-\|/g},{file:"111.gif",code:"/::@",title:"怒",reg:/\/::@/g},{file:"112.gif",code:"/::P",title:"调皮",reg:/\/::P/g},{file:"113.gif",code:"/::D",title:"笑",reg:/\/::D/g},{file:"114.gif",code:"/::O",title:"惊讶",reg:/\/::O/g},{file:"115.gif",code:"/::(",title:"难过",reg:/\/::\(/g},{file:"116.gif",code:"/::+",title:"酷",reg:/\/::\+/g},{file:"117.gif",code:"/:--b",title:"汗",reg:/\/:--b/g},{file:"118.gif",code:"/::Q",title:"抓狂",reg:/\/::Q/g},{file:"119.gif",code:"/::T",title:"吐",reg:/\/::T/g},{file:"120.gif",code:"/:,@P",title:"笑",reg:/\/:,@P/g},{file:"121.gif",code:"/:,@-D",title:"快乐",reg:/\/:,@-D/g},{file:"122.gif",code:"/::d",title:"奇",reg:/\/::d/g},{file:"123.gif",code:"/:,@o",title:"傲",reg:/\/:,@o/g},{file:"124.gif",code:"/::g",title:"饿",reg:/\/::g/g},{file:"125.gif",code:"/:|-)",title:"累",reg:/\/:\|-\)/g},{file:"126.gif",code:"/::!",title:"吓",reg:/\/::!/g},{file:"127.gif",code:"/::L",title:"汗",reg:/\/::L/g},{file:"128.gif",code:"/::>",title:"高兴",reg:/\/::>/g},{file:"129.gif",code:"/::,@",title:"闲",reg:/\/::,@/g},{file:"130.gif",code:"/:,@f",title:"努力",reg:/\/:,@f/g},{file:"131.gif",code:"/::-S",title:"骂",reg:/\/::-S/g},{file:"133.gif",code:"/:,@x",title:"秘密",reg:/\/:,@x/g},{file:"134.gif",code:"/:,@@",title:"乱",reg:/\/:,@@/g},{file:"135.gif",code:"/::8",title:"疯",reg:/\/::8/g},{file:"136.gif",code:"/:,@!",title:"哀",reg:/\/:,@!/g},{file:"137.gif",code:"/:!!!",title:"鬼",reg:/\/:!!!/g},{file:"138.gif",code:"/:xx",title:"打击",reg:/\/:xx/g},{file:"139.gif",code:"/:bye",title:"bye",reg:/\/:bye/g},{file:"142.gif",code:"/:handclap",title:"鼓掌",reg:/\/:handclap/g},{file:"145.gif",code:"/:<@",title:"什么",reg:/\/:<@/g},{file:"147.gif",code:"/::-O",title:"累",reg:/\/::-O/g},{file:"153.gif",code:"/:@x",title:"吓",reg:/\/:@x/g},{file:"155.gif",code:"/:pd",title:"刀",reg:/\/:pd/g},{file:"156.gif",code:"/:<W>",title:"水果",reg:/\/:<W>/g},{file:"157.gif",code:"/:beer",title:"酒",reg:/\/:beer/g},{file:"158.gif",code:"/:basketb",title:"篮球",reg:/\/:basketb/g},{file:"159.gif",code:"/:oo",title:"乒乓",reg:/\/:oo/g},{file:"195.gif",code:"/:circle",title:"跳舞",reg:/\/:circle/g},{file:"160.gif",code:"/:coffee",title:"咖啡",reg:/\/:coffee/g}],selectId:1,selectTarget:"",selectFriendId:0,vueSocket:null,conversations:[],messages:[],deviceId:"",userId:"",token:"",userInfos:new c.a,notify:"",firstLogin:!1,changeFullScreenMode:!1,appHeight:638,visibilityState:"hidden"}),T={initData:function(e){e.userId=localStorage.getItem("vue-user-id"),e.token=localStorage.getItem("vue-token");var t=new g.a(f.a,f.b,f.c,f.d,f.e,f.f,M);t.connect(!0),e.vueSocket=t;var n=C.a.getConversations();n&&(e.conversations=n);var i=C.a.getMessages();i&&(e.messages=i),e.selectTarget=C.a.getSelectTarget(),e.notify=new w.a({effect:"flash",interval:500,onclick:function(){console.log("on click"),e.notify.close()}})},search:function(e,t){e.searchText=t},selectSession:function(e,t){e.selectId=t},selectConversation:function(e,t){e.selectTarget=t;var n=e.conversations.find(function(e){return e.conversationInfo.target===t});n&&n.conversationInfo.unreadCount&&(n.conversationInfo.unreadCount.unread=0)},clearUnreadStatus:function(e){var t=e.conversations.find(function(t){return t.conversationInfo.target===e.selectTarget});t&&t.conversationInfo.unreadCount&&(t.conversationInfo.unreadCount.unread=0)},selectFriend:function(e,t){e.selectFriendId=t},updateFriendList:function(e,t){var n=e.friendlist[0];e.friendlist=[],e.friendlist.push(n);for(var i in t)t[i].wxid!=e.userId&&e.friendlist.push(t[i])},updateUserInfos:function(e,t){var n=e.userInfos;n||(n=new c.a);var i=!0,a=!1,s=void 0;try{for(var r,l=o()(t);!(i=(r=l.next()).done);i=!0){var u=r.value;console.log("uid "+u.uid+" portrait "+u.portrait),u.uid===e.userId&&(e.user.img=u.portrait,e.user.name=u.displayName),n.set(u.uid,u)}}catch(e){a=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}e.userInfos=n},sendMessage:function(e,t){var n=p.a.toMessage(e,t),i=m.a.convertToProtoMessage(n);console.log("send protomessage "+a()(i));var s=e.conversations.find(function(e){return e.conversationInfo.target===i.target});s.conversationInfo.lastMessage=i,s.conversationInfo.timestamp=i.timestamp;var o=e.messages.find(function(e){return e.target===i.target});if(!o){o=new v.a,o.target=i.target;var r=e.friendlist.find(function(e){return e.wxid===i.target});null!=r&&(o.name=r.nickname),o.protoMessages.push(i),e.messages.push(o)}o.protoMessages.push(i),e.vueSocket.sendMessage(i)},send:function(e){var t=e.friendlist.find(function(t){return t.id===e.selectFriendId}),n=e.conversations.find(function(e){return e.conversationInfo.target===t.wxid});if(n)e.selectTarget=n.conversationInfo.target;else{e.selectTarget=t.wxid;var i=new _.a;i.conversationType=y.a.Single,i.target=t.wxid,i.line=0,i.top=!1,i.slient=!1,i.timestamp=(new Date).getTime(),i.unreadCount=new I.a,i.lastMessage=null;var a=new h.a;a.name=t.remark,a.img=t.img,a.conversationInfo=i,e.conversations.unshift(a)}d.a.push({path:"/conversation"})},updateConversationInfo:function(e,t){var n,i,a=!1;for(var s in e.conversations){var o=e.conversations[s];if(o.conversationInfo.conversationType==t.conversationType&&o.conversationInfo.target==t.target){a=!0,i=s,o.conversationInfo.lastMessage=t.lastMessage,o.conversationInfo.timestamp=t.lastMessage.timestamp,n=o;break}}if(a&&(e.conversations.splice(i,1),e.conversations.unshift(n)),!a){if(n=new h.a,n.conversationInfo=t,t.conversationType==y.a.Single){var r=e.friendlist.find(function(e){return e.wxid===t.target});if(null!=r){var c=r.nickname,l=null==r.img?"static/images/vue.jpg":r.img;n.name=c,n.img=l}}else n.name=t.target,n.img||e.vueSocket.getGroupInfo(t.target,!1),n.img="static/images/vue.jpg";e.conversations.push(n)}var u=e.selectTarget===t.target,d="visible"===e.visibilityState;if(!e.firstLogin&&(!u||u&&!d)){var g=n.conversationInfo.unreadCount.unread+=1;console.log("target "+t.target+" unread count "+g),e.firstLogin||e.notify.notify({title:n.name,body:t.lastMessage.content.searchableContent,icon:n.img})}},updateConversationIntro:function(e,t){var n=!0,i=!1,a=void 0;try{for(var s,r=o()(t);!(n=(s=r.next()).done);n=!0){var c=s.value,l=e.conversations.find(function(e){return e.name===c.target});l&&(console.log("update conversation name "+l.name),l.name=c.name,c.portrait&&(l.img=c.portrait));var u=e.messages.find(function(e){return e.target===c.target});u&&(u.name=c.name)}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}},addProtoMessage:function(e,t){var n=!1,i=!0,a=!1,s=void 0;try{for(var r,c=o()(e.messages);!(i=(r=c.next()).done);i=!0){var l=r.value;t.target==l.target&&(n=!0,l.protoMessages.push(t))}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}if(!n){var l=new v.a,u=e.friendlist.find(function(e){return e.wxid===t.target});null!=u&&(l.name=u.nickname),l.target=t.target,l.protoMessages.push(t),e.messages.push(l)}},loginOut:function(e,t){e.userId="",e.token="",localStorage.setItem(f.g,""),localStorage.setItem(f.h,""),e.selectTarget="",e.vueSocket.sendDisConnectMessage(),e.vueSocket=null,e.conversations=[],e.messages=[],C.a.clearLocalStore(),d.a.push({path:"/login"})},changetFirstLogin:function(e,t){console.log("first login "+t),e.firstLogin=t},getUploadToken:function(e,t){e.vueSocket.getUploadToken(t)},visibilityChange:function(e,t){e.visibilityState=t}},b={searchedConversationList:function(){return k.conversations.filter(function(e){return!!e.name&&e.name.includes(k.searchText)})},searchedFriendlist:function(e){return e.friendlist.filter(function(t){return t.remark.includes(e.searchText)})},selectedChat:function(e){var t=e.messages.find(function(t){return t.target===e.selectTarget});return null==t&&(t={name:"",target:"",protoMessages:[]}),console.log("selectedChat "+t.name+" target "+t.target),t},selectedFriend:function(e){return e.friendlist.find(function(t){return t.id===e.selectFriendId})},messages:function(e){var t=e.messages.find(function(t){return t.target===e.selectTarget});return null==t?[]:t.protoMessages},userInfos:function(){return k.userInfos},unreadTotalCount:function(e){var t=0;if(e.conversations){var n=!0,i=!1,a=void 0;try{for(var s,r=o()(e.conversations);!(n=(s=r.next()).done);n=!0){var c=s.value;c.conversationInfo.unreadCount&&(t+=c.conversationInfo.unreadCount.unread)}}catch(e){i=!0,a=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw a}}}return 0===t?(e.notify.faviconClear(),e.notify.setTitle(),e.notify.close()):(e.notify.setFavicon(t),e.notify.setTitle("你有新的消息未读")),t}},S={search:function(e,t){var n=e.commit;setTimeout(function(){n("search",t)},100)},selectSession:function(e,t){return(0,e.commit)("selectSession",t)},selectConversation:function(e,t){return(0,e.commit)("selectConversation",t)},clearUnreadStatus:function(e,t){return(0,e.commit)("clearUnreadStatus",t)},selectFriend:function(e,t){return(0,e.commit)("selectFriend",t)},updateFriendList:function(e,t){return(0,e.commit)("updateFriendList",t)},updateUserInfos:function(e,t){return(0,e.commit)("updateUserInfos",t)},sendMessage:function(e,t){return(0,e.commit)("sendMessage",t)},send:function(e){return(0,e.commit)("send")},initData:function(e){return(0,e.commit)("initData")},updateConversationInfo:function(e,t){return(0,e.commit)("updateConversationInfo",t)},updateConversationIntro:function(e,t){return(0,e.commit)("updateConversationIntro",t)},addProtoMessage:function(e,t){return(0,e.commit)("addProtoMessage",t)},loginOut:function(e,t){return(0,e.commit)("loginOut",t)},changetFirstLogin:function(e,t){return(0,e.commit)("changetFirstLogin",t)},getUploadToken:function(e,t){return(0,e.commit)("getUploadToken",t)},visibilityChange:function(e,t){return(0,e.commit)("visibilityChange",t)}},M=new u.a.Store({state:k,mutations:T,getters:b,actions:S});M.watch(function(e){return e.conversations},function(e){C.a.saveConverSations(e)},{deep:!0}),M.watch(function(e){return e.messages},function(e){C.a.saveMessages(e)},{deep:!0}),M.watch(function(e){return e.selectTarget},function(e){C.a.setSelectTarget(e)},{deep:!0}),t.a=M},,,,,,,,,function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(26),g=n.n(d),f=n(5),h=n.n(f),v=n(22),p=n(23),m=n(47),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,t),u()(this,(t.__proto__||a()(t)).call(this,p.a.VOIP_CONTENT_TYPE_ACCEPT,e,n))}return h()(t,e),c()(t,[{key:"digest",value:function(){return""}},{key:"encode",value:function(){var e=g()(t.prototype.__proto__||a()(t.prototype),"encode",this).call(this);e.content=this.callId;var n;return n=this.audioOnly?"1":"0",e.binaryContent=m.a.utf8_to_b64(n),e}},{key:"decode",value:function(e){g()(t.prototype.__proto__||a()(t.prototype),"decode",this).call(this,e),this.callId=e.content;var n=m.a.b64_to_utf8(e.binaryContent);this.audioOnly="1"===n}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(26),g=n.n(d),f=n(5),h=n.n(f),v=n(22),p=n(23),m=n(47),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,t),u()(this,(t.__proto__||a()(t)).call(this,p.a.VOIP_CONTENT_TYPE_ACCEPT_T,e,n))}return h()(t,e),c()(t,[{key:"digest",value:function(){return""}},{key:"encode",value:function(){var e=g()(t.prototype.__proto__||a()(t.prototype),"encode",this).call(this);e.content=this.callId;var n;return n=this.audioOnly?"1":"0",e.binaryContent=m.a.utf8_to_b64(n),e}},{key:"decode",value:function(e){g()(t.prototype.__proto__||a()(t.prototype),"decode",this).call(this,e),this.callId=e.content;var n=m.a.b64_to_utf8(e.binaryContent);this.audioOnly="1"===n}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(26),g=n.n(d),f=n(5),h=n.n(f),v=n(22),p=n(23),m=n(47),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o()(this,t),u()(this,(t.__proto__||a()(t)).call(this,p.a.VOIP_CONTENT_TYPE_SIGNAL,e,n))}return h()(t,e),c()(t,[{key:"digest",value:function(){return""}},{key:"encode",value:function(){var e=g()(t.prototype.__proto__||a()(t.prototype),"encode",this).call(this);return e.content=this.callId,e.binaryContent=m.a.utf8_to_b64(this.payload),e}},{key:"decode",value:function(e){g()(t.prototype.__proto__||a()(t.prototype),"decode",this).call(this,e),this.callId=e.content,this.payload=m.a.b64_to_utf8(e.binaryContent)}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(35),a=n.n(i),s=n(3),o=n.n(s),r=n(0),c=n.n(r),l=n(1),u=n.n(l),d=n(6),g=n.n(d),f=n(26),h=n.n(f),v=n(5),p=n.n(v),m=n(22),y=n(23),C=n(47),_=function(e){function t(e,n,i){c()(this,t);var a=g()(this,(t.__proto__||o()(t)).call(this,y.a.VOIP_CONTENT_TYPE_START));return a.callId=e,a.targetId=n,a.audioOnly=i,a}return p()(t,e),u()(t,[{key:"digest",value:function(){return this.audioOnly?"[语音通话]":"[视频通话]"}},{key:"encode",value:function(){var e=h()(t.prototype.__proto__||o()(t.prototype),"encode",this).call(this);e.content=this.callId;var n={c:this.connectTime,e:this.endTime,s:this.status,a:this.audioOnly?1:0,t:this.targetId};return e.binaryContent=C.a.utf8_to_b64(a()(n)),e}},{key:"decode",value:function(e){h()(t.prototype.__proto__||o()(t.prototype),"decode",this).call(this,e),this.callId=e.content;var n=C.a.b64_to_utf8(e.binaryContent),i=JSON.parse(n);this.connectTime=i.c,this.endTime=i.e,this.status=i.s,this.audioOnly=1===i.a,this.targetId=i.t}}]),t}(m.a);t.a=_},function(e,t,n){"use strict";var i=n(34),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=function(){function e(){o()(this,e)}return c()(e,null,[{key:"addReceiveMessageListener",value:function(e){this.onReceiveMessageListeners.push(e)}},{key:"onReceiveMessage",value:function(e){var t=!0,n=!1,i=void 0;try{for(var s,o=a()(this.onReceiveMessageListeners);!(t=(s=o.next()).done);t=!0){s.value.onReceiveMessage(e)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}]),e}();l.onReceiveMessageListeners=[],t.a=l},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(26),g=n.n(d),f=n(5),h=n.n(f),v=n(175),p=n(97),m=n(23),y=function(e){function t(e,n,i){o()(this,t);var s=u()(this,(t.__proto__||a()(t)).call(this,m.a.Image,p.a.Image,e,n));return s.thumbnail=i,s}return h()(t,e),c()(t,[{key:"digest",value:function(){return"[图片]"}},{key:"encode",value:function(){var e=g()(t.prototype.__proto__||a()(t.prototype),"encode",this).call(this);return e.mediaType=p.a.Image,e.binaryContent=this.thumbnail,e}},{key:"decode",value:function(e){g()(t.prototype.__proto__||a()(t.prototype),"decode",this).call(this,e),this.thumbnail=e.binaryContent}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=n(180),c=n(99),l=function(){function e(){a()(this,e),this.conversation={},this.from="",this.content={},this.messageId=0,this.direction=0,this.status=0,this.messageUid=0,this.timestamp=0,this.to=""}return o()(e,null,[{key:"toMessage",value:function(t,n){var i=new e,a=t.conversations.find(function(e){return e.conversationInfo.target===t.selectTarget});return console.log("conversationtype "+a.conversationInfo.conversationType+" target "+a.conversationInfo.target),i.conversation=new r.a(a.conversationInfo.conversationType,a.conversationInfo.target,a.conversationInfo.line),i.content=n,i.from=t.userId,i.status=c.a.Sending,i.timestamp=(new Date).getTime(),i.direction=0,i.messageId=(new Date).getTime(),i}}]),e}();t.a=l},function(e,t,n){"use strict";var i=n(34),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(100),u=n(177),d=n(23),g=n(102),f=n(178),h=n(92),v=n(89),p=n(90),m=n(91),y=n(94),C=function(){function e(){o()(this,e)}return c()(e,null,[{key:"getMessageContentClazz",value:function(t){var n=!0,i=!1,s=void 0;try{for(var o,r=a()(e.MessageContents);!(n=(o=r.next()).done);n=!0){var c=o.value;if(c.type===t)return c.contentClazz?c.contentClazz:f.a}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}return console.log("message type "+t+" is unknown"),u.a}},{key:"getMessageContentPersitFlag",value:function(t){var n=!0,i=!1,s=void 0;try{for(var o,r=a()(e.MessageContents);!(n=(o=r.next()).done);n=!0){var c=o.value;if(c.type===t)return c.flag}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}return 0}}]),e}();C.MessageContents=[{name:"unknown",flag:l.a.Persist,type:d.a.Unknown,contentClazz:u.a},{name:"text",flag:l.a.Persist_And_Count,type:d.a.Text,contentClazz:g.a},{name:"ptext",flag:l.a.Persist,type:d.a.P_Text},{name:"voice",flag:l.a.Persist_And_Count,type:d.a.Voice},{name:"image",flag:l.a.Persist_And_Count,type:d.a.Image,contentClazz:y.a},{name:"location",flag:l.a.Persist_And_Count,type:d.a.Location},{name:"file",flag:l.a.Persist_And_Count,type:d.a.File},{name:"video",flag:l.a.Persist_And_Count,type:d.a.Video},{name:"sticker",flag:l.a.Persist_And_Count,type:d.a.Sticker},{name:"imageText",flag:l.a.Persist_And_Count,type:d.a.ImageText},{name:"tip",flag:l.a.Persist,type:d.a.Tip_Notification},{name:"typing",flag:l.a.Transparent,type:d.a.Typing},{name:"addGroupMemberNotification",flag:l.a.Persist,type:d.a.AddGroupMember_Notification},{name:"changeGroupNameNotification",flag:l.a.Persist,type:d.a.ChangeGroupName_Notification},{name:"changeGroupPortraitNotification",flag:l.a.Persist,type:d.a.ChangeGroupPortrait_Notification},{name:"createGroupNotification",flag:l.a.Persist,type:d.a.CreateGroup_Notification},{name:"dismissGroupNotification",flag:l.a.Persist,type:d.a.DismissGroup_Notification},{name:"kickoffGroupMemberNotification",flag:l.a.Persist,type:d.a.KickOffGroupMember_Notification},{name:"modifyGroupAliasNotification",flag:l.a.Persist,type:d.a.ModifyGroupAlias_Notification},{name:"quitGroupNotification",flag:l.a.Persist,type:d.a.QuitGroup_Notification},{name:"transferGroupOwnerNotification",flag:l.a.Persist,type:d.a.TransferGroupOwner_Notification},{name:"recall",flag:l.a.Persist,type:d.a.RecallMessage_Notification},{name:"callStartMessageContent",flag:l.a.Persist,type:d.a.VOIP_CONTENT_TYPE_START,contentClazz:h.a},{name:"callAnswerMessageContent",flag:l.a.No_Persist,type:d.a.VOIP_CONTENT_TYPE_ACCEPT,contentClazz:v.a},{name:"callAnswerTMessageContent",flag:l.a.Transparent,type:d.a.VOIP_CONTENT_TYPE_ACCEPT_T,contentClazz:p.a},{name:"callByeMessageContent",flag:l.a.No_Persist,type:d.a.VOIP_CONTENT_TYPE_END},{name:"callSignalMessageContent",flag:l.a.Transparent,type:d.a.VOIP_CONTENT_TYPE_SIGNAL,contentClazz:m.a},{name:"callModifyMessageContent",flag:l.a.No_Persist,type:d.a.VOIP_CONTENT_TYPE_MODIFY},{name:"callAddParticipant",flag:l.a.Persist,type:d.a.VOIP_CONTENT_TYPE_ADD_PARTICIPANT},{name:"callMuteVideo",flag:l.a.No_Persist,type:d.a.VOIP_CONTENT_TYPE_MUTE_VIDEO}],t.a=C},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e)};s.General=0,s.Image=1,s.Voice=2,s.Video=3,s.File=4,s.Portrait=5,s.Fvaorite=6,t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e),this.mentionedType=0,this.mentionedTargets=[]};t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e)};s.Sending=0,s.Sent=1,s.SendFailure=2,s.Mentioned=3,s.AllMentioned=4,s.Unread=5,s.Readed=6,s.Played=7,t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e)};s.No_Persist=0,s.Persist=1,s.Persist_And_Count=3,s.Transparent=4,t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=n(99),c=n(46),l=n(176),u=n(14),d=function(){function e(){a()(this,e),this.from="",this.content={},this.messageId=0,this.direction=0,this.status=0,this.messageUid=0,this.timestamp=0,this.to=""}return o()(e,null,[{key:"toProtoMessage",value:function(t){var n=u.a.getUserId(),i=new e;return t.from==n?(i.direction=0,i.status=r.a.Sent):(i.direction=1,i.status=r.a.Unread),i.messageId=t.messageId,i.messageUid=t.messageId,i.timestamp=t.timestamp,i.conversationType=t.conversationType,i.target=t.target,i.from=t.from,i.conversationType==c.a.Single&&(t.from!=n?(i.target=t.from,i.from=t.from):(i.target=t.target,i.from=t.from)),i.line=t.line,i.content=l.a.toProtoMessageContent(t.content),i}},{key:"convertToProtoMessage",value:function(t){var n=new e;n.conversationType=t.conversation.type,n.target=t.conversation.target,n.line=t.conversation.line,n.from=t.from,n.direction=t.direction,n.status=t.status,n.messageId=t.messageId,n.messageUid=t.messageUid,n.timestamp=t.timestamp;var i=t.content.encode();return n.content=l.a.toProtoMessageContent(i),n}}]),e}();t.a=d},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(26),g=n.n(d),f=n(5),h=n.n(f),v=n(22),p=(n(98),n(23)),m=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];o()(this,t);var s=u()(this,(t.__proto__||a()(t)).call(this,p.a.Text,n,i));return s.content=e,s}return h()(t,e),c()(t,[{key:"digest",value:function(){return this.content}},{key:"encode",value:function(){var e=g()(t.prototype.__proto__||a()(t.prototype),"encode",this).call(this);return e.searchableContent=this.content,e}},{key:"decode",value:function(e){g()(t.prototype.__proto__||a()(t.prototype),"decode",this).call(this,e),this.content=e.searchableContent}}]),t}(v.a);t.a=m},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(56),o=function e(){a()(this,e),this.lastMessage={},this.timestamp=0,this.draft="",this.unreadCount=new s.a,this.isTop=!1,this.isSilent=!1};t.a=o},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e),this.name="",this.protoMessages=[]};t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=function(){function e(){a()(this,e)}return o()(e,null,[{key:"_formatDate",value:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}},{key:"getTimeStringAutoShort2",value:function(e,t){var n=new Date,i=new Date(parseInt(e)),a=n.getFullYear(),s=n.getMonth()+1,o=n.getDate(),r=i.getFullYear(),c=i.getMonth()+1,l=i.getDate(),u="",d=t?" "+this._formatDate(i,"hh:mm"):"";if(a==r){var g=n.getTime(),f=e,h=g-f;if(s==c&&o==l)u=h<6e4?"刚刚":this._formatDate(i,"hh:mm");else{var v=new Date;v.setDate(v.getDate()-1);var p=new Date;if(p.setDate(p.getDate()-2),c==v.getMonth()+1&&l==v.getDate())u="昨天"+d;else if(c==p.getMonth()+1&&l==p.getDate())u="前天"+d;else{var m=h/36e5;if(m<=168){var y=new Array(7);y[0]="星期日",y[1]="星期一",y[2]="星期二",y[3]="星期三",y[4]="星期四",y[5]="星期五",y[6]="星期六";var C=y[i.getDay()];u=C+d}else u=this._formatDate(i,"yy/M/d")+d}}}else u=this._formatDate(i,"yy/M/d")+d;return u}}]),e}();t.a=r},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(281);var i=n(13)(n(157),n(314),"data-v-300d4e33",null);e.exports=i.exports},function(e,t,n){"use strict";var i=n(44),a=(n(80),["/login"]);i.a.beforeEach(function(e,t,n){var i=localStorage.getItem("vue-token");console.log("match route token "+i+" to "+e.path+" from "+t.path+" next "+n.path),i?"/login"===e.path?n({path:"/conversation"}):n():-1!==a.indexOf(e.path)?n():n("/login")})},function(e,t,n){n(280);var i=n(13)(n(151),n(313),"data-v-2a75fd14",null);e.exports=i.exports},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(325),a=n.n(i);t.default={name:"VueXgplayer",data:function(){return{player:null}},props:{config:{type:Object,default:function(){return{id:"mse",url:""}}},rootStyle:{type:Object,default:function(){return{}}}},methods:{init:function(){this.config.url&&""!==this.config.url&&(this.player=new a.a(this.config),this.$emit("player",this.player))}},mounted:function(){this.init()},beforeUpdate:function(){this.init()},beforeDestroy:function(){this.player&&"function"==typeof this.player.destroy&&this.player.destroy()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(19);t.default={name:"AppChat"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),a=n.n(i),s=n(19),o=n(46),r=n(14),c=n(105);t.default={computed:a()({},n.i(s.c)(["selectId","selectTarget","searchText","appHeight"]),n.i(s.b)(["searchedConversationList"])),methods:a()({},n.i(s.d)(["selectSession","selectConversation"]),{processageGroupMessage:function(e){var t,n=e.conversationInfo;if(n.lastMessage){t=n.lastMessage.content.searchableContent,400===n.lastMessage.content.type&&(t="[网络电话]");var i=n.lastMessage.from===r.a.getUserId();if(n.conversationType==o.a.Group&&!i){var a=n.lastMessage.from;console.log("conversation group from "+a);var s=this.$store.state.userInfos.get(a),c="";s&&((c=s.displayName)||(c=s.mobile)),t=c+":"+n.lastMessage.content.searchableContent}}return t}}),filters:{time:function(e){return"string"==typeof e&&(e=new Date(e)),"number"==typeof e&&(e=new Date(e)),e.getMinutes()<10?e.getHours()+":0"+e.getMinutes():e.getHours()+":"+e.getMinutes()},getTimeStringAutoShort2:function(e){return c.a.getTimeStringAutoShort2(e,!1)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),a=n.n(i),s=n(19);t.default={computed:a()({},n.i(s.c)(["selectFriendId","searchText"]),n.i(s.b)(["searchedFriendlist"])),methods:a()({},n.i(s.d)(["selectFriend"]))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),a=n.n(i),s=(n(44),n(19));t.default={computed:a()({},n.i(s.b)(["selectedFriend"])),methods:{send:function(){this.$store.dispatch("send"),this.$store.dispatch("search","")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),a=n.n(i),s=n(19),o=n(105),r=n(299),c=n.n(r),l=n(277),u=(n.n(l),n(297)),d=n.n(u),g=n(45),f=n(125),h=n.n(f);g.a.use(d.a),t.default={components:{Xgplayer:c.a},data:function(){return{Player:null}},computed:a()({},n.i(s.b)(["selectedChat","messages","userInfos"]),n.i(s.c)(["user","emojis","appHeight"])),mounted:function(){var e=this;setTimeout(function(){return e.$refs.list.scrollTop=e.$refs.list.scrollHeight},0)},watch:{messages:function(){var e=this;setTimeout(function(){return e.$refs.list.scrollTop=e.$refs.list.scrollHeight},0)}},methods:{replaceFace:function(e){if(e.includes("/:")){for(var t=this.emojis,n=0;n<t.length;n++)e=e.replace(t[n].reg,'<img src="static/emoji/'+t[n].file+'"  alt="" style="vertical-align: middle; width: 24px; height: 24px" />');return e}return e},isfaceMessage:function(e){return e.includes("/:")},isShowTime:function(e,t){var n=t[e].timestamp;if(e>0){if(n-t[e-1].timestamp>3e5)return!0}return!1},videoConfig:function(e){return{id:"vs"+e,url:e,height:330,width:250,autoplay:arguments.length>1&&void 0!==arguments[1]&&arguments[1],download:!0}},scrollEvent:function(e){var t=this.$refs.list.offsetHeight;e.srcElement.scrollHeight-e.srcElement.scrollTop>t&&this.$store.dispatch("clearUnreadStatus","")},messageBoxClick:function(e){this.$store.dispatch("clearUnreadStatus",""),console.log("message box click")},notification:function(e,t){var n=h.a.enc.Base64.parse(e).toString(h.a.enc.Utf8),i=JSON.parse(n);console.log("notify "+n);var a;switch(t){case 104:a="创建群组"+i.n;break;case 110:a="修改群名为"+i.n}return a},isNotification:function(e){return e>=104&&e<=112}},filters:{time:function(e){return"string"==typeof e&&(e=new Date(e)),"number"==typeof e&&(e=new Date(e)),e.getMinutes()<10?e.getHours()+":0"+e.getMinutes():e.getHours()+":"+e.getMinutes()},getTimeStringAutoShort2:function(e){return o.a.getTimeStringAutoShort2(e,!0)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),a=n.n(i),s=n(19);t.default={computed:a()({},n.i(s.c)(["user"]),n.i(s.b)(["unreadTotalCount"])),methods:{clearSearch:function(){this.$store.dispatch("search","")},loginOut:function(){this.$store.dispatch("loginOut","")},changeFullScreenMode:function(){var e=this.$store.state.changeFullScreenMode;console.log("change screen mode "+e);var t=this;t.$store.state.changeFullScreenMode=!e,setTimeout(function(){var e=t.$refs.mycardRef.offsetHeight;console.log("resize mycard height "+e),t.$store.state.appHeight=e},200)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={methods:{change:function(){this.$store.dispatch("search",this.search)},del:function(){this.search="",this.change()}},data:function(){return{search:"",active:!1}},computed:{noText:function(){return""===this.search},haveText:function(){return""!==this.search}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),a=n.n(i),s=n(19),o=n(102),r=n(94),c=n(290),l=(n.n(c),n(97)),u=n(14),d=n(164);t.default={data:function(){return{content:"",reply:"未找到",frequency:0,warn:!1,showEmoji:!1,showChatBox:!1,voipClient:null}},computed:a()({},n.i(s.c)(["selectId","emojis"]),n.i(s.b)(["selectedChat"])),methods:{sendPic:function(e){var t=this.$store;t.dispatch("getUploadToken",l.a.Image),console.log("sendpic "+e.target.value);var n=e.target.files[0],i=l.a.Image+"-"+localStorage.getItem("vue-user-id")+"-"+(new Date).getTime()+"-"+n.name;setTimeout(function(){var a=u.a.getImageUploadToken();if(console.log("upload file key "+i+" token "+a),a){var s=c.upload(n,i,a,null,null),o={next:function(e){console.log("uploading "+e.total.percent)},error:function(e){console.log("upload error "+e.code+" message "+e.message)},complete:function(n){console.log("upload complete "+n);var a=e.target.value,s="http://image.comsince.cn/"+i,o=new r.a(a,s,null);t.dispatch("sendMessage",o)}};s.subscribe(o)}},200),this.$refs.uploadPic.value=null},sendMessage:function(e){this.send(),e.preventDefault()},onBlur:function(){console.log("send text onblur")},onFocus:function(){console.log("send text onfoucs"),this.$store.dispatch("clearUnreadStatus","")},send:function(){var e=this;if(console.log("send message "+this.content),this.content.length<=1)this.warn=!0,this.content="",setTimeout(function(){e.warn=!1},1e3);else if("机器人"===this.selectedChat.name)this.$http.get("https://zhaoplus.com/api/AI?search="+this.content).then(function(t){e.reply=t.data.result.text,e.content.includes("/:")&&(e.reply="嘻嘻");var n={content:e.content,reply:e.reply};e.$store.dispatch("sendMessage",n),e.content=""});else{var t=new o.a(this.content);this.$store.dispatch("sendMessage",t),this.content=""}},sendVideo:function(){this.showChatBox=!0,this.voipClient||(this.voipClient=new d.a(this.$store)),this.voipClient.startCall(this.$store.state.selectTarget,!1)}},mounted:function(){this.$refs.text.focus()},watch:{selectId:function(){var e=this;setTimeout(function(){e.$refs.text.focus()},0)},content:function(){var e=this;""===this.content&&0===this.frequency&&(this.warn=!0,this.frequency++,setTimeout(function(){e.warn=!1},1e3))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(129),a=n.n(i),s=n(300),o=n.n(s),r=n(303),c=n.n(r),l=n(305),u=n.n(l);n(55),n(8);t.default={components:{search:a.a,chatlist:o.a,message:c.a,vText:u.a},mounted:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(129),a=n.n(i),s=n(301),o=n.n(s),r=n(302),c=n.n(r);t.default={components:{search:a.a,friendlist:o.a,info:c.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),a=n.n(i),s=n(8),o=(n(19),n(296)),r=n.n(o),c=n(133),l=n.n(c);t.default={name:"Login",data:function(){return{mobile:"",code:"",loginAPI:s.v}},methods:{login:function(){var e=this,t=localStorage.getItem(s.j);null==t&&(t=r.a.create().toString(),console.log("generate device id "+t),localStorage.setItem(s.j,t)),console.log("vue deviceId "+t),l()({method:"post",url:s.v,data:a()({mobile:this.mobile,code:this.code,clientId:t}),headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){if(console.log("login code "+t.data.code+" message "+t.data.message),0==t.data.code){var n=t.data.result.userId,i=t.data.result.token;console.log("userId "+n+" token "+i),e.$store.state.userId=n,e.$store.state.token=i,localStorage.setItem(s.g,n),localStorage.setItem(s.h,i),e.$router.push({path:"/conversation"})}}).catch(function(e){console.log(e)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),a=n.n(i),s=n(304),o=n.n(s),r=n(19);n(55),n(8);t.default={components:{mycard:o.a},created:function(){this.$store.dispatch("initData")},computed:a()({},n.i(r.c)(["changeFullScreenMode"])),mounted:function(){var e=this;window.onresize=function(){console.log("windown onresize");var t=e.$refs.appRef.offsetHeight;console.log("resize app height "+t),e.$store.state.appHeight=t},this.$store.state.appHeight=this.$refs.appRef.offsetHeight,document.addEventListener("visibilitychange",this.handleVisiable)},destroyed:function(){window.onresize=null,document.removeEventListener("visibilitychange",this.handleVisiable)},methods:{handleVisiable:function(e){console.log("current visibility state "+e.target.visibilityState),this.$store.dispatch("visibilityChange",e.target.visibilityState)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=n(131),s=n.n(a),o=n(44),r=n(80);n(130);i.a.config.productionTip=!1;new i.a({el:"#app",router:o.a,store:r.a,template:"<App/>",components:{App:s.a}})},function(e,t,n){"use strict";var i=n(198),a=n.n(i),s=n(196),o=n.n(s),r=n(3),c=n.n(r),l=n(0),u=n.n(l),d=n(1),g=n.n(d),f=n(6),h=n.n(f),v=n(5),p=n.n(v),m=n(92),y=n(93),C=n(174),_=n(96),I=n(89),w=n(91),k=n(90),T=function(e){function t(e){u()(this,t);var n=h()(this,(t.__proto__||c()(t)).call(this));return n.mediaConstraints={audio:!0,video:!0},n.store=e,y.a.addReceiveMessageListener(n),n}return p()(t,e),g()(t,[{key:"startCall",value:function(e,t){var n=new m.a(e+(new Date).getTime(),e,t);this.offerMessage(n),this.startPreview()}},{key:"offerMessage",value:function(e){this.store.dispatch("sendMessage",e)}},{key:"onReceiveMessage",value:function(e){var t=_.a.getMessageContentClazz(e.content.type);if(t){var n=new t;try{n.decode(e.content)}catch(e){console.log("decode error")}n instanceof I.a?console.log("callId "+n.callId+" isAudioOnly "+n.audioOnly):n instanceof k.a?console.log("callId "+n.callId+" isAudioOnly "+n.audioOnly):n instanceof w.a&&console.log("payload "+n.payload)}}},{key:"startPreview",value:function(){function e(){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.log("Starting to prepare an invitation"),!this.myPeerConnection){e.next=5;break}alert("You can't start a call because you already have one open!"),e.next=18;break;case 5:return this.createPeerConnection(),e.prev=6,e.next=9,navigator.mediaDevices.getUserMedia(this.mediaConstraints);case 9:this.webcamStream=e.sent,document.getElementById("video-local").srcObject=this.webcamStream,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),this.handleGetUserMediaError(e.t0),e.abrupt("return");case 17:try{this.webcamStream.getTracks().forEach(this.transceiver=function(e){return t.myPeerConnection.addTransceiver(e,{streams:[t.webcamStream]})})}catch(e){this.handleGetUserMediaError(e)}case 18:case"end":return e.stop()}},e,this,[[6,13]])}));return e}()},{key:"createPeerConnection",value:function(){function e(){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.log("Setting up a connection..."),this.myPeerConnection=new RTCPeerConnection({iceServers:[{urls:"turn:turn.liyufan.win:3478",username:"wfchat",credential:"wfchat"}]}),this.myPeerConnection.onicecandidate=this.handleICECandidateEvent,this.myPeerConnection.oniceconnectionstatechange=this.handleICEConnectionStateChangeEvent,this.myPeerConnection.onicegatheringstatechange=this.handleICEGatheringStateChangeEvent,this.myPeerConnection.onsignalingstatechange=this.handleSignalingStateChangeEvent,this.myPeerConnection.onnegotiationneeded=this.handleNegotiationNeededEvent,this.myPeerConnection.ontrack=this.handleTrackEvent;case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleNegotiationNeededEvent",value:function(){function e(){return t.apply(this,arguments)}var t=o()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.log("*** Negotiation needed");case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleICECandidateEvent",value:function(e){e.candidate&&this.log("*** Outgoing ICE candidate: "+e.candidate.candidate)}},{key:"handleICEConnectionStateChangeEvent",value:function(e){switch(this.log("*** ICE connection state changed to "+myPeerConnection.iceConnectionState),myPeerConnection.iceConnectionState){case"closed":case"failed":case"disconnected":closeVideoCall()}}},{key:"handleSignalingStateChangeEvent",value:function(e){switch(this.log("*** WebRTC signaling state changed to: "+myPeerConnection.signalingState),myPeerConnection.signalingState){case"closed":closeVideoCall()}}},{key:"handleTrackEvent",value:function(e){this.log("*** Track event")}},{key:"handleICEGatheringStateChangeEvent",value:function(e){this.log("*** ICE gathering state changed to: "+myPeerConnection.iceGatheringState)}},{key:"closeVideoCall",value:function(){var e=document.getElementById("video-local");this.log("Closing the call"),myPeerConnection&&(this.log("--\x3e Closing the peer connection"),this.myPeerConnection.ontrack=null,this.myPeerConnection.onnicecandidate=null,this.myPeerConnection.oniceconnectionstatechange=null,this.myPeerConnection.onsignalingstatechange=null,this.myPeerConnection.onicegatheringstatechange=null,this.myPeerConnection.onnotificationneeded=null,this.myPeerConnection.getTransceivers().forEach(function(e){e.stop()}),e.srcObject&&(e.pause(),e.srcObject.getTracks().forEach(function(e){e.stop()})),this.myPeerConnection.close(),this.myPeerConnection=null,this.webcamStream=null)}},{key:"handleGetUserMediaError",value:function(e){switch(this.log_error(e),e.name){case"NotFoundError":alert("Unable to open your call because no camera and/or microphonewere found.");break;case"SecurityError":case"PermissionDeniedError":break;default:alert("Error opening your camera and/or microphone: "+e.message)}}},{key:"reportError",value:function(e){this.log_error("Error "+e.name+": "+e.message)}},{key:"log_error",value:function(e){var t=new Date;console.trace("["+t.toLocaleTimeString()+"] "+e)}},{key:"log",value:function(e){var t=new Date;console.log("["+t.toLocaleTimeString()+"] "+e)}}]),t}(C.a);t.a=T},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(8),h=n(21),v=n(14),p=function(e){function t(e){return o()(this,t),u()(this,(t.__proto__||a()(t)).call(this,e))}return g()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==f.u}},{key:"processMessage",value:function(e){console.log("ConnectAckHandler process message");var t=JSON.parse(e.content);console.log("connectAcceptedMessage friendHead "+t.friendHead+" messageHead "+t.messageHead),this.vueWebsocket.getFriend();var n=v.a.getLastMessageSeq();n?this.vueWebsocket.sendAction("changetFirstLogin",!1):(n="0",this.vueWebsocket.sendAction("changetFirstLogin",!0)),this.vueWebsocket.pullMessage(n,0,0,v.a.getSendMessageCount()),v.a.setLastMessageSeq(t.messageHead)}}]),t}(h.a);t.a=p},function(e,t,n){"use strict";var i=n(34),a=n.n(i),s=n(3),o=n.n(s),r=n(0),c=n.n(r),l=n(1),u=n.n(l),d=n(6),g=n.n(d),f=n(5),h=n.n(f),v=n(21),p=n(8),m=n(181),y=function(e){function t(){return c()(this,t),g()(this,(t.__proto__||o()(t)).apply(this,arguments))}return h()(t,e),u()(t,[{key:"match",value:function(e){return e.signal==p.s&&e.subSignal==p.o}},{key:"processMessage",value:function(e){if(null!=e.content){var t=JSON.parse(e.content),n=[],i=!0,s=!1,o=void 0;try{for(var r,c=a()(t);!(i=(r=c.next()).done);i=!0){var l=r.value;n.push(m.a.convert2GroupInfo(l))}}catch(e){s=!0,o=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw o}}this.vueWebsocket.sendAction("updateConversationIntro",n)}}}]),t}(v.a);t.a=y},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(21),h=n(8),v=n(14),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return g()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==h.s&&e.subSignal==h.q}},{key:"processMessage",value:function(e){if(e.content){var t=JSON.parse(e.content),n=t.domain,i=t.token;console.log("domain "+n+" token "+i),v.a.setUploadToken(n,i)}}}]),t}(f.a);t.a=p},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(21),h=n(8),v=n(14),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return g()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==h.s&&e.subSignal==h.m}},{key:"processMessage",value:function(e){var t=JSON.parse(e.content),n=[];for(var i in t)n[i]=t[i].friendUid;n.push(v.a.getUserId()),this.vueWebsocket.getUserInfos(n)}}]),t}(f.a);t.a=p},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(21),h=n(8),v=n(184),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return g()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==h.s&&e.subSignal==h.n}},{key:"processMessage",value:function(e){if(null!=e.content){var t=JSON.parse(e.content),n=[],i=[];for(var a in t){var s=null==t[a].displayName?t[a].mobile:t[a].displayName;n.push({id:parseInt(a)+1,wxid:t[a].uid,initial:t[a].uid.substring(0,1),img:t[a].portrait,signature:"",nickname:s,sex:0,remark:s,area:t[a].address}),i.push(v.a.convert2UserInfo(t[a]))}console.log("stateFriendList "+n.length),this.vueWebsocket.sendAction("updateUserInfos",i),this.vueWebsocket.sendAction("updateFriendList",n)}}}]),t}(f.a);t.a=p},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=function(){function e(){a()(this,e)}return o()(e,[{key:"match",value:function(e){return!1}},{key:"processMessage",value:function(e){}}]),e}();t.a=r},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(21),h=n(8),v=n(14),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return g()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==h.l&&e.subSignal==h.t}},{key:"processMessage",value:function(e){console.log("notifymessage "+e.content);var t=JSON.parse(e.content);console.log("notify messageHead "+t.messageHead+" notify type "+t.type),v.a.resetSendMessageCount(),v.a.setLastMessageSeq(t.messageHead),this.vueWebsocket.pullMessage(t.messageHead,t.type,1)}}]),t}(f.a);t.a=p},function(e,t,n){"use strict";var i=n(34),a=n.n(i),s=n(3),o=n.n(s),r=n(0),c=n.n(r),l=n(1),u=n.n(l),d=n(6),g=n.n(d),f=n(5),h=n.n(f),v=n(21),p=n(8),m=(n(95),n(101)),y=n(103),C=n(14),_=n(56),I=n(96),w=n(100),k=n(93),T=function(e){function t(){var e,n,i,a;c()(this,t);for(var s=arguments.length,r=Array(s),l=0;l<s;l++)r[l]=arguments[l];return n=i=g()(this,(e=t.__proto__||o()(t)).call.apply(e,[this].concat(r))),i.conversations=[],a=n,g()(i,a)}return h()(t,e),u()(t,[{key:"match",value:function(e){return e.signal==p.s&&e.subSignal==p.p}},{key:"processMessage",value:function(e){C.a.resetSendMessageCount();var t=JSON.parse(e.content);console.log("current "+t.current+" head "+t.head+" messageCount "+t.messageCount);var n=!0,i=!1,s=void 0;try{for(var o,r=a()(t.messageResponseList);!(n=(o=r.next()).done);n=!0){var c=o.value,c=m.a.toProtoMessage(c);this.isDisplayableMessage(c)&&(this.addProtoMessage(c),this.createAndUpdateConversation(c)),k.a.onReceiveMessage(c)}}catch(e){i=!0,s=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw s}}this.vueWebsocket.sendAction("changetFirstLogin",!1)}},{key:"createAndUpdateConversation",value:function(e){var t=new y.a;t.conversationType=e.conversationType,t.target=e.target,t.line=0,t.top=!1,t.slient=!1,t.timestamp=e.timestamp,t.lastMessage=e,t.unreadCount=new _.a,this.vueWebsocket.sendAction("updateConversationInfo",t)}},{key:"addProtoMessage",value:function(e){this.vueWebsocket.sendAction("addProtoMessage",e)}},{key:"isDisplayableMessage",value:function(e){var t=e.content;return I.a.getMessageContentPersitFlag(t.type)==w.a.Persist||I.a.getMessageContentPersitFlag(t.type)==w.a.Persist_And_Count}}]),t}(v.a);t.a=T},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(21),h=n(8),v=n(14),p=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return g()(t,e),c()(t,[{key:"match",value:function(e){return e.signal==h.s&&e.subSignal==h.r}},{key:"processMessage",value:function(e){var t=JSON.parse(e.content);console.log("SendMessageHandler messageId "+t.messageId+" timestamp "+t.timestamp),v.a.updateSendMessageCount()}}]),t}(f.a);t.a=p},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=function(){function e(){a()(this,e)}return o()(e,[{key:"onReceiveMessage",value:function(e){}}]),e}();t.a=r},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(26),g=n.n(d),f=n(5),h=n.n(f),v=n(22),p=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments[2],s=arguments[3];o()(this,t);var r=u()(this,(t.__proto__||a()(t)).call(this,e));return r.remotePath="",r.localPath="",r.mediaType=0,r.mediaType=n,"string"==typeof i?(r.localPath=i,r.remotePath=s):(r.file=i,i&&void 0!==i.path&&(r.localPath=i.path,r.localPath.indexOf(i.name)<0&&(r.localPath+=i.name))),r}return h()(t,e),c()(t,[{key:"encode",value:function(){var e=g()(t.prototype.__proto__||a()(t.prototype),"encode",this).call(this);return e.localMediaPath=this.localPath,e.remoteMediaUrl=this.remotePath,e.mediaType=this.mediaType,e.searchableContent=this.digest(),e}},{key:"decode",value:function(e){g()(t.prototype.__proto__||a()(t.prototype),"decode",this).call(this,e),this.localPath=e.localMediaPath,this.remotePath=e.remoteMediaUrl,this.mediaType=e.mediaType}}]),t}(v.a);t.a=p},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=function(){function e(){a()(this,e),this.mentionedType=0,this.mentionedTargets=[]}return o()(e,null,[{key:"toProtoMessageContent",value:function(t){var n=new e;return n.type=t.type,n.content=t.content,n.searchableContent=t.searchableContent,n.pushContent=t.pushContent,n.binaryContent=t.binaryContent,n.localContent=t.localContent,n.mediaType=t.mediaType,n.remoteMediaUrl=t.remoteMediaUrl,n.localMediaPath=t.localMediaPath,n.mentionedType=t.mentionedType,n.mentionedTargets=t.mentionedTargets,n}}]),e}();t.a=r},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(22),h=n(23),v=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||a()(t)).call(this,h.a.Unknown));return n.originalPayload=e,n}return g()(t,e),c()(t,[{key:"encode",value:function(){return this.originalPayload}},{key:"decode",value:function(e){this.originalPayload=e}},{key:"digest",value:function(){return"未知类型消息"}}]),t}(f.a);t.a=v},function(e,t,n){"use strict";var i=n(3),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=n(6),u=n.n(l),d=n(5),g=n.n(d),f=n(22),h=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||a()(t)).apply(this,arguments))}return g()(t,e),c()(t,[{key:"digest",value:function(){return"尚不支持该类型消息, 请手机查看 : "+this.type}}]),t}(f.a);t.a=h},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(35),a=n.n(i),s=n(0),o=n.n(s),r=n(1),c=n.n(r),l=function(){function e(){o()(this,e),console.log("constuctor")}return c()(e,[{key:"setMessageId",value:function(e){this.messageId=e}},{key:"setSignal",value:function(e){this.signal=e}},{key:"setSubSignal",value:function(e){this.subsignal=e}},{key:"setContent",value:function(e){this.content=e}},{key:"toJson",value:function(){var e={signal:this.signal,subsignal:null==this.subsignal?"NONE":this.subsignal,message_id:null==this.messageId?0:this.messageId,content:this.content};return a()(e)}}]),e}()},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=n(46),c=function(){function e(t,n,i){a()(this,e),this.type=r.a.Single,this.conversationType=this.type,this.target="",this.line=0,this.type=t,this.conversationType=t,this.target=n,this.line=i}return o()(e,[{key:"equal",value:function(e){return this.type===e.type&&this.target===e.target&&this.line===e.line}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=n(182),c=function(){function e(){a()(this,e),this.target="",this.name="",this.portrait="",this.owner="",this.type=r.a.Normal,this.memberCount=0,this.extra="",this.updateDt=0}return o()(e,null,[{key:"convert2GroupInfo",value:function(t){var n=new e;return n.target=t.target,n.name=t.name,n.portrait=t.portrait,n.owner=t.owner,n.type=t.type,n.memberCount=t.memberCount,n.extra=t.extra,n.updateDt=t.updateDt,n}}]),e}();t.a=c},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e)};s.Normal=0,s.Free=1,s.Restricted=2,t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=function e(){a()(this,e),this.conversationInfo={}};t.a=s},function(e,t,n){"use strict";var i=n(0),a=n.n(i),s=n(1),o=n.n(s),r=function(){function e(){a()(this,e),this.uid="",this.name="",this.displayName="",this.gender=0,this.portrait="",this.mobile="",this.email="",this.address="",this.social="",this.extra="",this.type=0,this.updateDt=1550652404513}return o()(e,null,[{key:"convert2UserInfo",value:function(t){var n=new e;return n.uid=t.uid,n.name=t.name,n.displayName=t.displayName,n.gender=t.gender,n.portrait=t.portrait,n.mobile=t.mobile,n.email=t.email,n.address=t.address,n.social=t.social,n.extra=t.extra,n.type=t.type,n.updateDt=t.updateDt,n}}]),e}();t.a=r},function(e,t,n){"use strict";function i(e){var t=u.a.AES.decrypt(e,d,{iv:d,mode:u.a.mode.CBC,padding:u.a.pad.Pkcs7});return u.a.enc.Hex.parse(t.toString().slice(8)).toString(u.a.enc.Utf8)}function a(e,t){console.log("code "+e+" key "+t);for(var n=new Array(16),i=0;i<16;i++)n[i]=255&t.charCodeAt(i);var a=String.fromCharCode.apply(String,n),o=u.a.enc.Utf8.parse(a);console.log("keycode "+a);var r=s(e);return console.log("timeEncryptCode "+r),u.a.AES.encrypt(u.a.enc.Base64.parse(r),o,{iv:o,mode:u.a.mode.CBC,padding:u.a.pad.Pkcs7}).ciphertext.toString(u.a.enc.Base64)}function s(e){var t=u.a.enc.Base64.parse(e);t=o(t.words);for(var n=[],i=((new Date).getMilliseconds()/1e3-1514736e3)/3600,a=0;a<t.length+4;a++)a<4?0==a?n.push(255&i):1==a?n.push((65280&i)>>8):2==a?n.push((16711680&i)>>16):3==a&&n.push((255&i)>>24):n.push(t[a-4]);console.log("convertTimeEncryptCode result "+n);var s=btoa(String.fromCharCode.apply(String,c()(new Uint8Array(n))));return console.log("hash word "+s),s}function o(e){var t,n,i,a=[];for(n=0;n<e.length;++n)for(t=e[n],i=3;i>=0;--i)a.push(t>>8*i&255);return a}t.a=i,t.b=a;var r=n(197),c=n.n(r),l=n(125),u=n.n(l),d=u.a.enc.Base64.parse("ABEiM0RVZnd4eXp7fH1+fw==")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,function(e,t){e.exports="data:image/png;base64,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"},,,,function(e,t,n){var i=n(13)(n(150),n(310),null,null);e.exports=i.exports},function(e,t,n){n(278);var i=n(13)(n(152),n(311),"data-v-0d7b1a33",null);e.exports=i.exports},function(e,t,n){n(288);var i=n(13)(n(153),n(321),"data-v-da467b9a",null);e.exports=i.exports},function(e,t,n){n(282);var i=n(13)(n(154),n(315),"data-v-33585db3",null);e.exports=i.exports},function(e,t,n){n(283);var i=n(13)(n(155),n(316),"data-v-44e23d43",null);e.exports=i.exports},function(e,t,n){n(286);var i=n(13)(n(156),n(319),"data-v-8859209a",null);e.exports=i.exports},function(e,t,n){n(279);var i=n(13)(n(158),n(312),"data-v-24d12513",null);e.exports=i.exports},function(e,t,n){n(285);var i=n(13)(n(159),n(318),"data-v-69091f6c",null);e.exports=i.exports},function(e,t,n){n(284);var i=n(13)(n(160),n(317),"data-v-5d7d306c",null);e.exports=i.exports},function(e,t,n){n(287);var i=n(13)(n(161),n(320),"data-v-c6bcac80",null);e.exports=i.exports},function(e,t,n){n(289);var i=n(13)(n(162),n(322),"data-v-f15027e8",null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{style:e.rootStyle,attrs:{id:e.config.id}})},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conversationlist",style:{height:e.appHeight-60+"px"}},[n("ul",e._l(e.searchedConversationList,function(t){return n("li",{staticClass:"sessionlist",class:{active:t.conversationInfo.target===e.selectTarget},on:{click:function(n){return e.selectConversation(t.conversationInfo.target)}}},[n("div",{staticClass:"list-left"},[n("img",{staticClass:"avatar",attrs:{width:"42",height:"42",alt:"static/images/vue.jpg",src:t.img,onerror:"this.src='static/images/vue.jpg'"}})]),e._v(" "),n("div",{staticClass:"list-right"},[n("div",{staticClass:"title-info"},[n("p",{staticClass:"name"},[e._v(e._s(t.name?t.name:""))]),e._v(" "),n("span",{staticClass:"time"},[e._v(e._s(e._f("getTimeStringAutoShort2")(t.conversationInfo.timestamp)))])]),e._v(" "),n("div",{staticClass:"lastmsg-info"},[n("p",{staticClass:"lastmsg"},[e._v(e._s(e.processageGroupMessage(t)))]),e._v(" "),t.conversationInfo.unreadCount&&t.conversationInfo.unreadCount.unread>0?n("span",{staticClass:"unread-num"},[n("span",{staticClass:"unread-num-show"},[e._v(e._s(t.conversationInfo.unreadCount?t.conversationInfo.unreadCount.unread:0))])]):e._e()])])])}),0)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text"},[n("div",{staticClass:"emoji"},[n("i",{staticClass:"icon iconfont icon-biaoqing1",on:{click:function(t){e.showEmoji=!e.showEmoji}}}),e._v(" "),n("i",{staticClass:"icon iconfont icon-tupian",attrs:{title:"发送图片"}},[n("input",{ref:"uploadPic",attrs:{type:"file",accept:"image/*",id:"chat-send-img"},on:{change:e.sendPic}})]),e._v(" "),e._m(0),e._v(" "),n("transition",{attrs:{name:"showbox"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showEmoji,expression:"showEmoji"}],staticClass:"emojiBox"},e._l(e.emojis,function(t,i){return n("li",{key:i},[n("img",{attrs:{src:"static/emoji/"+t.file,data:t.code},on:{click:function(n){e.content+=t.code}}})])}),0)]),e._v(" "),n("transition",{attrs:{name:"voice-video-chat-box"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showChatBox,expression:"showChatBox"}],staticClass:"chat-modal"},[n("div",{staticClass:"chat-box"},[n("video",{attrs:{id:"video-local",playsinline:"",autoplay:"",muted:""},domProps:{muted:!0}})])])])],1),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],ref:"text",domProps:{value:e.content},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},blur:e.onBlur,focus:e.onFocus,click:function(t){e.showEmoji=!1},input:function(t){t.target.composing||(e.content=t.target.value)}}}),e._v(" "),n("div",{staticClass:"send",on:{click:e.send}},[n("span",[e._v("发送(ent)")])]),e._v(" "),n("transition",{attrs:{name:"appear"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.warn,expression:"warn"}],staticClass:"warn"},[n("div",{staticClass:"description"},[e._v("不能发送空白信息")])])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("i",{staticClass:"icon iconfont icon-shipin",attrs:{title:"发送视频"}},[n("input",{attrs:{type:"file",accept:"video/*"}})])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"layout-container",attrs:{id:"app-chat"}},[n("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"padding-wrapper"},[n("div",{staticClass:"search-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"searchInput",attrs:{type:"text",placeholder:"搜索"},domProps:{value:e.search},on:{keyup:e.change,input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),n("i",{directives:[{name:"show",rawName:"v-show",value:e.noText,expression:"noText"}],staticClass:"icon iconfont icon-sousuo"}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.haveText,expression:"haveText"}],staticClass:"searchInput-delete",on:{click:e.del}})])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Info-wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.selectedFriend.id,expression:"selectedFriend.id === 0"}],staticClass:"newfriend"},[n("div",{staticClass:"nickname"},[e._v(e._s(e.selectedFriend.nickname))])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedFriend.id>0,expression:"selectedFriend.id > 0"}],staticClass:"friendInfo"},[n("div",{staticClass:"esInfo"},[n("div",{staticClass:"left"},[n("div",{staticClass:"people"},[n("div",{staticClass:"nickname"},[e._v(e._s(e.selectedFriend.nickname))]),e._v(" "),n("div",{class:[1===e.selectedFriend.sex?"gender-male":"gender-female"]})]),e._v(" "),n("div",{staticClass:"signature"},[e._v(e._s(e.selectedFriend.signature))])]),e._v(" "),n("div",{staticClass:"right"},[n("img",{staticClass:"avatar",attrs:{width:"60",height:"60",src:e.selectedFriend.img}})])]),e._v(" "),n("div",{staticClass:"detInfo"},[n("div",{staticClass:"remark"},[n("span",[e._v("备   注")]),e._v(e._s(e.selectedFriend.remark))]),e._v(" "),n("div",{staticClass:"area"},[n("span",[e._v("地   区")]),e._v(e._s(e.selectedFriend.area))]),e._v(" "),n("div",{staticClass:"wxid"},[n("span",[e._v("微信号")]),e._v(e._s(e.selectedFriend.wxid))])]),e._v(" "),n("div",{staticClass:"send",on:{click:e.send}},[n("span",[e._v("发消息")])])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message"},[n("header",{staticClass:"header"},[n("div",{staticClass:"friendname"},[e._v(e._s(e.selectedChat.name))])]),e._v(" "),n("div",{ref:"list",staticClass:"message-wrapper",style:{height:.75*e.appHeight-60+"px"},on:{scroll:e.scrollEvent,click:e.messageBoxClick}},[e.selectedChat?n("ul",e._l(e.selectedChat.protoMessages,function(t,i){return n("li",{key:i,staticClass:"message-item"},[e.isShowTime(i,e.selectedChat.protoMessages)?n("div",{staticClass:"time"},[n("span",[e._v(e._s(e._f("getTimeStringAutoShort2")(t.timestamp)))])]):e._e(),e._v(" "),104===t.content.type?n("div",{staticClass:"time"},[n("span",[e._v(e._s(e.notification(t.content.binaryContent,t.content.type)))])]):e._e(),e._v(" "),110===t.content.type?n("div",{staticClass:"time"},[n("span",[e._v(e._s(e.notification(t.content.binaryContent,t.content.type)))])]):e._e(),e._v(" "),e.isNotification(t.content.type)?e._e():n("div",{staticClass:"main",class:{self:0==t.direction}},[n("img",{staticClass:"avatar",attrs:{width:"36",height:"36",src:0==t.direction?e.user.img:null!=e.userInfos.get(t.from)?e.userInfos.get(t.from).portrait:"static/images/vue.jpg",onerror:"this.src='static/images/vue.jpg'"}}),e._v(" "),n("div",{staticClass:"content"},[1===t.content.type&&e.isfaceMessage(t.content.searchableContent)?n("div",{staticClass:"text",domProps:{innerHTML:e._s(e.replaceFace(t.content.searchableContent))}}):e._e(),e._v(" "),1!==t.content.type||e.isfaceMessage(t.content.searchableContent)?e._e():n("div",{staticClass:"text",domProps:{textContent:e._s(t.content.searchableContent)}}),e._v(" "),2===t.content.type?n("div",[e._v("\n                                请到手机上查看音频消息\n                            ")]):e._e(),e._v(" "),3===t.content.type?n("div",{directives:[{name:"viewer",rawName:"v-viewer"}]},[n("img",{staticClass:"receive-image",attrs:{src:t.content.remoteMediaUrl}})]):e._e(),e._v(" "),4===t.content.type?n("div",[e._v("\n                                [位置消息]\n                            ")]):e._e(),e._v(" "),5===t.content.type?n("div",[e._v("\n                                [文件消息]\n                            ")]):e._e(),e._v(" "),6===t.content.type?n("div",[n("Xgplayer",{attrs:{config:e.videoConfig(t.content.remoteMediaUrl,i===e.selectedChat.protoMessages.length-1)},on:{player:function(t){e.Player=t}}})],1):e._e(),e._v(" "),7===t.content.type?n("div",[e._v("\n                                [表情消息]\n                            ")]):e._e(),e._v(" "),8===t.content.type?n("div",[e._v("\n                                [图片表情]\n                            ")]):e._e(),e._v(" "),400===t.content.type?n("div",[e._v("\n                                [网络电话]\n                            ")]):e._e()])])])}),0):e._e()])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"friend-wrapper"},[n("search"),e._v(" "),n("friendlist")],1),e._v(" "),n("div",{staticClass:"friendinfo"},[n("info")],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"msglist"},[n("search"),e._v(" "),n("chatlist")],1),e._v(" "),n("div",{staticClass:"chatbox"},[n("message"),e._v(" "),n("v-text")],1)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"mycardRef",staticClass:"mycard"},[n("header",[n("img",{staticClass:"avatar",attrs:{src:e.user.img},on:{click:e.changeFullScreenMode}})]),e._v(" "),n("div",{staticClass:"navbar",on:{click:e.clearSearch}},[n("div",{staticClass:"conversation-item"},[e.unreadTotalCount>0?n("span",{staticClass:"unread-num"},[n("span",{staticClass:"unread-num-show"},[e._v(e._s(e.unreadTotalCount))])]):e._e(),e._v(" "),n("router-link",{staticClass:"icon iconfont icon-dkw_xiaoxi",attrs:{to:"/conversation"}})],1),e._v(" "),n("router-link",{staticClass:"icon iconfont icon-xinpengyou",attrs:{to:"/friend"}})],1),e._v(" "),n("footer",[n("i",{staticClass:"icon iconfont icon-tuichu",attrs:{title:"退出"},on:{click:e.loginOut}})])])},staticRenderFns:[]}},function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_box"},[n("router-link",{attrs:{to:"#"}},[n("div",{staticClass:"login_close"})]),e._v(" "),n("div",{staticClass:"login_panel"},[e._m(0),e._v(" "),n("label",{staticStyle:{"margin-top":"50px"}},[e._v("手机号码：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],attrs:{type:"tel",pattern:"^\\d{11}$",title:"请输入账号"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}}),e._v(" "),n("label",[e._v("验证码：")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"num",title:"请输入密码"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}}),e._v(" "),n("input",{staticClass:"bt",attrs:{type:"submit",value:"登录"},on:{click:e.login}})])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login_title"},[i("img",{attrs:{src:n(295),alt:""}}),e._v(" "),i("p",[e._v("输入账号进行安全登录")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"friendlist"},[n("ul",e._l(e.searchedFriendlist,function(t){return n("li",{staticClass:"frienditem",class:{noborder:!t.initial}},[t.initial?n("div",{staticClass:"list_title"},[e._v(e._s(t.initial))]):e._e(),e._v(" "),n("div",{staticClass:"friend-info",class:{active:t.id===e.selectFriendId},on:{click:function(n){return e.selectFriend(t.id)}}},[n("img",{staticClass:"avatar",attrs:{width:"36",height:"36",src:t.img,onerror:"this.src='static/images/vue.jpg'"}}),e._v(" "),n("div",{staticClass:"remark"},[e._v(e._s(t.remark))])])])}),0)])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"appRef",class:{fullscreen:e.changeFullScreenMode},attrs:{id:"app"}},[n("div",{staticClass:"sidebar"},[n("mycard")],1),e._v(" "),n("div",{staticClass:"main"},[n("router-view")],1)])},staticRenderFns:[]}}],[163]);
//# sourceMappingURL=app.d37c4e548eab43c10eb3.js.map